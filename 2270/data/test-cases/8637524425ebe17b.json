{"uid":"8637524425ebe17b","name":"test_sharding","fullName":"tests.integration.sharding_tests.test_sharding#test_sharding","historyId":"c66768853f22956b5f68d342d643f41b","time":{"start":1726106121137,"stop":1726106122337,"duration":1200},"description":"Tests writing data to mongos gets propagated to shards.","descriptionHtml":"<p>Tests writing data to mongos gets propagated to shards.</p>\n","status":"broken","statusMessage":"pymongo.errors.OperationFailure: Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1726106116, 2), 'signature': {'hash': b'=\\x10L\\x12\\xc3\\x1d\\xc0\\x05m\\xe2\"d\\xce\\xbaF|!M\\x99\\xbb', 'keyId': 7413566255333900295}}, 'operationTime': Timestamp(1726106116, 2)}","statusTrace":"Traceback (most recent call last):\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: TResult | None = func()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/threadexception.py\", line 92, in pytest_runtest_call\n    yield from thread_exception_runtest_hook()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/threadexception.py\", line 68, in thread_exception_runtest_hook\n    yield\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/unraisableexception.py\", line 95, in pytest_runtest_call\n    yield from unraisable_exception_runtest_hook()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/unraisableexception.py\", line 70, in unraisable_exception_runtest_hook\n    yield\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/logging.py\", line 848, in pytest_runtest_call\n    yield from self._runtest_for(item, \"call\")\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/logging.py\", line 831, in _runtest_for\n    yield\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/capture.py\", line 879, in pytest_runtest_call\n    return (yield)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/skipping.py\", line 257, in pytest_runtest_call\n    return (yield)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 174, in pytest_runtest_call\n    item.runtest()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1627, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 159, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/tests/integration/sharding_tests/test_sharding.py\", line 179, in test_sharding\n    write_data_to_mongodb(\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/tests/integration/sharding_tests/helpers.py\", line 67, in write_data_to_mongodb\n    horses_collection.insert_one(content)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/collection.py\", line 658, in insert_one\n    self._insert_one(\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/collection.py\", line 598, in _insert_one\n    self.__database.client._retryable_write(\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/mongo_client.py\", line 1575, in _retryable_write\n    return self._retry_with_session(retryable, func, s, bulk, operation, operation_id)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/mongo_client.py\", line 1461, in _retry_with_session\n    return self._retry_internal(\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/_csot.py\", line 108, in csot_wrapper\n    return func(self, *args, **kwargs)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/mongo_client.py\", line 1507, in _retry_internal\n    ).run()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/mongo_client.py\", line 2353, in run\n    return self._read() if self._is_read else self._write()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/mongo_client.py\", line 2457, in _write\n    with self._client._checkout(self._server, self._session) as conn:\n  File \"/usr/lib/python3.10/contextlib.py\", line 135, in __enter__\n    return next(self.gen)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/mongo_client.py\", line 1266, in _checkout\n    with server.checkout(handler=err_handler) as conn:\n  File \"/usr/lib/python3.10/contextlib.py\", line 135, in __enter__\n    return next(self.gen)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/pool.py\", line 1767, in checkout\n    conn = self._get_conn(checkout_started_time, handler=handler)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/pool.py\", line 1926, in _get_conn\n    conn = self.connect(handler=handler)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/pool.py\", line 1729, in connect\n    conn.authenticate()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/pool.py\", line 1099, in authenticate\n    auth.authenticate(creds, self, reauthenticate=reauthenticate)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/auth.py\", line 656, in authenticate\n    auth_func(credentials, conn)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/auth.py\", line 558, in _authenticate_default\n    return _authenticate_scram(credentials, conn, \"SCRAM-SHA-256\")\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/auth.py\", line 338, in _authenticate_scram\n    res = conn.command(source, cmd)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/helpers.py\", line 342, in inner\n    return func(*args, **kwargs)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/pool.py\", line 989, in command\n    return command(\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/network.py\", line 212, in command\n    helpers._check_command_response(\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pymongo/helpers.py\", line 248, in _check_command_response\n    raise OperationFailure(errmsg, code, response, max_wire_version)\npymongo.errors.OperationFailure: Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1726106116, 2), 'signature': {'hash': b'=\\x10L\\x12\\xc3\\x1d\\xc0\\x05m\\xe2\"d\\xce\\xbaF|!M\\x99\\xbb', 'keyId': 7413566255333900295}}, 'operationTime': Timestamp(1726106116, 2)}","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"ops_test","time":{"start":1726105195045,"stop":1726105195236,"duration":191},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1726105195045,"stop":1726105195045,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1726105195045,"stop":1726105195045,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1726106121137,"stop":1726106121137,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"abort_on_fail::0","time":{"start":1726106122339,"stop":1726106122339,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1726106122346,"stop":1726106122661,"duration":315},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1726106122661,"stop":1726106122661,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1726106122661,"stop":1726106122661,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1726106122661,"stop":1726106122662,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"runner(['self-hosted', 'linux', 'X64', 'jammy', 'large'])"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.sharding_tests"},{"name":"suite","value":"test_sharding"},{"name":"host","value":"github-runner"},{"name":"thread","value":"11448-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.sharding_tests.test_sharding"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"ea74086a10d5f126","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":2,"passed":37,"unknown":4,"total":45},"items":[{"uid":"7b680ab83503f745","reportUrl":"../2260//#testresult/7b680ab83503f745","status":"unknown","time":{}},{"uid":"730c586492817bcd","reportUrl":"../2253//#testresult/730c586492817bcd","status":"passed","time":{"start":1725935312576,"stop":1725935316043,"duration":3467}},{"uid":"6c32c88f5f66bfe6","reportUrl":"../2244//#testresult/6c32c88f5f66bfe6","status":"passed","time":{"start":1725847156672,"stop":1725847160124,"duration":3452}},{"uid":"7f4806c6fd2cb665","reportUrl":"../2242//#testresult/7f4806c6fd2cb665","status":"broken","statusDetails":"pymongo.errors.OperationFailure: Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1725760636, 1), 'signature': {'hash': b'\\x9a\\xe7\\xbfOy_A\\xa6\\xe4\\xb0\\x04\\xe2\\x16\\xf0*|\\xf2\\x0c\\x04\\xff', 'keyId': 7412082223874048022}}, 'operationTime': Timestamp(1725760636, 1)}","time":{"start":1725760642185,"stop":1725760643215,"duration":1030}},{"uid":"e0f56e2556269714","reportUrl":"../2240//#testresult/e0f56e2556269714","status":"passed","time":{"start":1725674940136,"stop":1725674943505,"duration":3369}},{"uid":"1af4d1dd4a6547be","reportUrl":"../2235//#testresult/1af4d1dd4a6547be","status":"passed","time":{"start":1725587579761,"stop":1725587583156,"duration":3395}},{"uid":"a2d6c73c9e04c24e","reportUrl":"../2232//#testresult/a2d6c73c9e04c24e","status":"passed","time":{"start":1725501848865,"stop":1725501854436,"duration":5571}},{"uid":"d8bc187d0247ae89","reportUrl":"../2228//#testresult/d8bc187d0247ae89","status":"passed","time":{"start":1725414824877,"stop":1725414828334,"duration":3457}},{"uid":"8c74100f919fba13","reportUrl":"../2218//#testresult/8c74100f919fba13","status":"passed","time":{"start":1725328364689,"stop":1725328368080,"duration":3391}},{"uid":"95c40a5f8dc0ab24","reportUrl":"../2207//#testresult/95c40a5f8dc0ab24","status":"passed","time":{"start":1725242584771,"stop":1725242591370,"duration":6599}},{"uid":"c61890dedd4de304","reportUrl":"../2206//#testresult/c61890dedd4de304","status":"passed","time":{"start":1725155766393,"stop":1725155769786,"duration":3393}},{"uid":"8f0816a2820d82dc","reportUrl":"../2205//#testresult/8f0816a2820d82dc","status":"passed","time":{"start":1725069318179,"stop":1725069321603,"duration":3424}},{"uid":"113536e6dbf8e15","reportUrl":"../2191//#testresult/113536e6dbf8e15","status":"passed","time":{"start":1724983043783,"stop":1724983047183,"duration":3400}},{"uid":"da09ed2807e8f650","reportUrl":"../2186//#testresult/da09ed2807e8f650","status":"passed","time":{"start":1724896807989,"stop":1724896811548,"duration":3559}},{"uid":"3137b2f10fcd4173","reportUrl":"../2183//#testresult/3137b2f10fcd4173","status":"unknown","time":{}},{"uid":"e543cc0ae37c9236","reportUrl":"../2182//#testresult/e543cc0ae37c9236","status":"passed","time":{"start":1724723859426,"stop":1724723862844,"duration":3418}},{"uid":"86db9da0000023db","reportUrl":"../2181//#testresult/86db9da0000023db","status":"unknown","time":{}},{"uid":"64b8345757b66871","reportUrl":"../2180//#testresult/64b8345757b66871","status":"passed","time":{"start":1724550824318,"stop":1724550827811,"duration":3493}},{"uid":"91b3398977bc51a2","reportUrl":"../2179//#testresult/91b3398977bc51a2","status":"passed","time":{"start":1724464449941,"stop":1724464453415,"duration":3474}},{"uid":"b640995b0204b768","reportUrl":"../2173//#testresult/b640995b0204b768","status":"passed","time":{"start":1724379570462,"stop":1724379574900,"duration":4438}}]},"tags":["runner(['self-hosted', 'linux', 'X64', 'jammy', 'large'])","asyncio","abort_on_fail","group(1)"]},"source":"8637524425ebe17b.json","parameterValues":[]}