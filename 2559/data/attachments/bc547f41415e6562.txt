[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  shard-two/0 [idle] active: Shard drained from cluster, ready for removal
  shard-two/1 [idle] active: Shard drained from cluster, ready for removal
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  shard-two/0 [idle] active: 
  shard-two/1 [idle] waiting: Waiting for secrets from config-server
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  shard-two/1 [idle] waiting: Waiting for secrets from config-server
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  shard-two/1 [idle] waiting: Waiting for secrets from config-server
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  shard-two/1 [idle] waiting: Waiting for secrets from config-server
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  shard-two/1 [idle] waiting: Waiting for secrets from config-server
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  shard-two/1 [idle] waiting: Waiting for secrets from config-server
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  shard-two/1 [idle] waiting: Waiting for secrets from config-server
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  shard-two/1 [idle] waiting: Waiting for secrets from config-server
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  shard-two/0 [idle] active: 
  shard-two/1 [idle] active: Primary
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  config-server-one/0 [idle] active: Primary
  config-server-one/1 [idle] active: 
  shard-one/0 [idle] active: 
  shard-one/1 [idle] active: Primary
[32mINFO    [0m pytest_operator.plugin:plugin.py:903 Model status:

Model  Controller           Cloud/Region         Version  SLA          Timestamp
test   localhost-localhost  localhost/localhost  3.6.1    unsupported  02:12:50Z

App                Version  Status  Scale  Charm    Channel  Rev  Exposed  Message
config-server-one           active      2  mongodb             0  no       
shard-one                   active      2  mongodb             1  no       
shard-three                 active      2  mongodb             3  no       

Unit                  Workload  Agent  Machine  Public address  Ports            Message
config-server-one/0*  active    idle   0        10.43.176.183   27017-27018/tcp  
config-server-one/1   active    idle   1        10.43.176.93    27017-27018/tcp  
shard-one/0*          active    idle   2        10.43.176.118   27017/tcp        
shard-one/1           active    idle   3        10.43.176.164   27017/tcp        Primary
shard-three/0*        active    idle   6        10.43.176.19    27017/tcp        
shard-three/1         active    idle   7        10.43.176.90    27017/tcp        Primary

Machine  State    Address        Inst id        Base          AZ  Message
0        started  10.43.176.183  juju-917f93-0  ubuntu@22.04      Running
1        started  10.43.176.93   juju-917f93-1  ubuntu@22.04      Running
2        started  10.43.176.118  juju-917f93-2  ubuntu@22.04      Running
3        started  10.43.176.164  juju-917f93-3  ubuntu@22.04      Running
6        started  10.43.176.19   juju-917f93-6  ubuntu@22.04      Running
7        started  10.43.176.90   juju-917f93-7  ubuntu@22.04      Running

[32mINFO    [0m pytest_operator.plugin:plugin.py:909 Juju error logs:

machine-0: 01:34:54 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 01:34:54 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-one-0: 01:34:54 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-1: 01:34:58 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 01:34:58 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-one-1: 01:34:58 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-one-0: 01:35:49 ERROR unit.config-server-one/0.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-one-0: 01:35:49 ERROR unit.config-server-one/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-config-server-one-1: 01:35:52 ERROR unit.config-server-one/1.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-one-1: 01:35:52 ERROR unit.config-server-one/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
machine-2: 01:36:00 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-2: 01:36:00 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-one-0: 01:36:00 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-3: 01:36:03 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-3: 01:36:03 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-one-1: 01:36:03 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-one-0: 01:36:28 ERROR unit.config-server-one/0.juju-log _on_secret_remove: Secret secret:cug1r1fflmad061dhb0g seems to have no observers, could be removed
machine-4: 01:36:39 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-4: 01:36:39 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-two-0: 01:36:39 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-shard-one-0: 01:36:41 ERROR unit.shard-one/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-one-0: 01:36:41 ERROR unit.shard-one/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
machine-5: 01:36:42 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-5: 01:36:42 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-two-1: 01:36:42 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-shard-one-1: 01:36:43 ERROR unit.shard-one/1.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-one-1: 01:36:43 ERROR unit.shard-one/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-two-0: 01:37:10 ERROR unit.shard-two/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-two-0: 01:37:10 ERROR unit.shard-two/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-two-1: 01:37:13 ERROR unit.shard-two/1.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-two-1: 01:37:13 ERROR unit.shard-two/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-one-0: 01:37:21 ERROR unit.shard-one/0.juju-log _on_secret_remove: Secret secret:cug1rffflmad061dhb10 seems to have no observers, could be removed
machine-6: 01:37:32 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-6: 01:37:32 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-three-0: 01:37:32 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-7: 01:37:35 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-7: 01:37:35 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-three-1: 01:37:35 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-shard-two-0: 01:37:50 ERROR unit.shard-two/0.juju-log _on_secret_remove: Secret secret:cug1rmfflmad061dhb1g seems to have no observers, could be removed
unit-shard-three-0: 01:38:00 ERROR unit.shard-three/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-three-0: 01:38:00 ERROR unit.shard-three/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-three-1: 01:38:03 ERROR unit.shard-three/1.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-three-1: 01:38:03 ERROR unit.shard-three/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-three-0: 01:38:33 ERROR unit.shard-three/0.juju-log _on_secret_remove: Secret secret:cug1s1fflmad061dhb20 seems to have no observers, could be removed
unit-config-server-one-0: 01:40:35 ERROR unit.config-server-one/0.juju-log config-server:10: Failed to add shard shard-one to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738546834, 2), 'signature': {'hash': b'\\x9b\\xba\\xf6]P;\\x89\\xd3\\xce\\xb2*9\\xbb\\x13\\x03\\xf5\\x82W\\xe4B', 'keyId': 7467000673607876634}}, 'operationTime': Timestamp(1738546834, 2)}")
unit-config-server-one-0: 01:40:35 ERROR unit.config-server-one/0.juju-log config-server:10: shard-one shard does not have the same auth as the config server.
unit-config-server-one-0: 01:40:36 ERROR unit.config-server-one/0.juju-log config-server:8: Failed to add shard shard-one to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738546834, 2), 'signature': {'hash': b'\\x9b\\xba\\xf6]P;\\x89\\xd3\\xce\\xb2*9\\xbb\\x13\\x03\\xf5\\x82W\\xe4B', 'keyId': 7467000673607876634}}, 'operationTime': Timestamp(1738546834, 2)}")
unit-config-server-one-0: 01:40:36 ERROR unit.config-server-one/0.juju-log config-server:8: shard-one shard does not have the same auth as the config server.
unit-config-server-one-0: 01:40:37 ERROR unit.config-server-one/0.juju-log config-server:8: Failed to add shard shard-one to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738546837, 1), 'signature': {'hash': b'\\x19\\x81\\xa2\\xf9\\xf1\\x04\\xa2B \\xce\\x93\\x95\\xc8\\x11s\\x8d\\x0b\\xe1\\xf6\\x15', 'keyId': 7467000673607876634}}, 'operationTime': Timestamp(1738546837, 1)}")
unit-config-server-one-0: 01:40:37 ERROR unit.config-server-one/0.juju-log config-server:8: shard-one shard does not have the same auth as the config server.
unit-config-server-one-0: 01:40:53 ERROR unit.config-server-one/0.juju-log config-server:9: Failed to add shard shard-one to the config server, error=OperationFailure('Could not find host matching read preference { mode: "primary" } for set shard-one, full error: {\'ok\': 0.0, \'errmsg\': \'Could not find host matching read preference { mode: "primary" } for set shard-one\', \'code\': 133, \'codeName\': \'FailedToSatisfyReadPreference\', \'$clusterTime\': {\'clusterTime\': Timestamp(1738546853, 4), \'signature\': {\'hash\': b\'\\x1c\\xbb\\xffp\\x0cWq\\xcf@\\x1dt\\xcas\\xf8\\x99;&\\xc9s1\', \'keyId\': 7467000673607876634}}, \'operationTime\': Timestamp(1738546853, 4)}')
unit-config-server-one-0: 01:40:54 ERROR unit.config-server-one/0.juju-log config-server:9: Failed to add shard shard-two to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738546853, 4), 'signature': {'hash': b'\\x1c\\xbb\\xffp\\x0cWq\\xcf@\\x1dt\\xcas\\xf8\\x99;&\\xc9s1', 'keyId': 7467000673607876634}}, 'operationTime': Timestamp(1738546853, 4)}")
unit-config-server-one-0: 01:40:54 ERROR unit.config-server-one/0.juju-log config-server:9: shard-two shard does not have the same auth as the config server.
unit-config-server-one-0: 01:41:06 ERROR unit.config-server-one/0.juju-log config-server:9: Failed to add shard shard-two to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738546866, 6), 'signature': {'hash': b'\\x95v\\x17\\x08\\x93\\xc3\\xea\\r\\x14(\\x9b\\x918M\\xd8\\x0c\\x82\\x9a\\x14\\x18', 'keyId': 7467000673607876634}}, 'operationTime': Timestamp(1738546866, 6)}")
unit-config-server-one-0: 01:41:06 ERROR unit.config-server-one/0.juju-log config-server:9: shard-two shard does not have the same auth as the config server.
unit-config-server-one-0: 01:41:08 ERROR unit.config-server-one/0.juju-log config-server:8: Failed to add shard shard-two to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738546867, 1), 'signature': {'hash': b'\\t\\xd0\\x10\\x0f\\x08\\xe9E\\x8c# \\xa0\\xed\\xa0V\\xde^\\x02\\xc2<\\xb2', 'keyId': 7467000673607876634}}, 'operationTime': Timestamp(1738546867, 1)}")
unit-config-server-one-0: 01:41:08 ERROR unit.config-server-one/0.juju-log config-server:8: shard-two shard does not have the same auth as the config server.
unit-shard-one-0: 01:41:16 ERROR unit.shard-one/0.juju-log _on_secret_remove: Secret secret:cug1rffflmad061dhb10 seems to have no observers, could be removed
unit-config-server-one-0: 01:41:23 ERROR unit.config-server-one/0.juju-log config-server:8: Failed to add shard shard-two to the config server, error=OperationFailure('Could not find host matching read preference { mode: "primary" } for set shard-two, full error: {\'ok\': 0.0, \'errmsg\': \'Could not find host matching read preference { mode: "primary" } for set shard-two\', \'code\': 133, \'codeName\': \'FailedToSatisfyReadPreference\', \'$clusterTime\': {\'clusterTime\': Timestamp(1738546882, 1), \'signature\': {\'hash\': b\'\\xba\\xb7\\xba\\xeb\\xbc\\x98\\n\\xe9\\n\\x94\\xa0\\x856d\\xed\\xa2w>\\x8e\\xc8\', \'keyId\': 7467000673607876634}}, \'operationTime\': Timestamp(1738546882, 1)}')
unit-config-server-one-0: 01:41:23 ERROR unit.config-server-one/0.juju-log config-server:8: Failed to add shard-two to cluster
unit-config-server-one-0: 01:41:23 ERROR unit.config-server-one/0.juju-log config-server:8: Deferring _on_relation_event for shards interface since: error=OperationFailure('Could not find host matching read preference { mode: "primary" } for set shard-two, full error: {\'ok\': 0.0, \'errmsg\': \'Could not find host matching read preference { mode: "primary" } for set shard-two\', \'code\': 133, \'codeName\': \'FailedToSatisfyReadPreference\', \'$clusterTime\': {\'clusterTime\': Timestamp(1738546882, 1), \'signature\': {\'hash\': b\'\\xba\\xb7\\xba\\xeb\\xbc\\x98\\n\\xe9\\n\\x94\\xa0\\x856d\\xed\\xa2w>\\x8e\\xc8\', \'keyId\': 7467000673607876634}}, \'operationTime\': Timestamp(1738546882, 1)}')
unit-config-server-one-0: 01:41:42 ERROR unit.config-server-one/0.juju-log config-server:9: Failed to add shard shard-three to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738546901, 2), 'signature': {'hash': b'Y\\x92\\x94\\x81W\\xe9g\\x1b\\x13\\xfb-$\\xc5\\xe5U!\\x05B9v', 'keyId': 7467000673607876634}}, 'operationTime': Timestamp(1738546901, 2)}")
unit-config-server-one-0: 01:41:42 ERROR unit.config-server-one/0.juju-log config-server:9: shard-three shard does not have the same auth as the config server.
unit-shard-two-0: 01:41:46 ERROR unit.shard-two/0.juju-log _on_secret_remove: Secret secret:cug1rmfflmad061dhb1g seems to have no observers, could be removed
unit-config-server-one-0: 01:41:59 ERROR unit.config-server-one/0.juju-log config-server:9: Failed to add shard shard-three to the config server, error=OperationFailure('Could not find host matching read preference { mode: "primary" } for set shard-three, full error: {\'ok\': 0.0, \'errmsg\': \'Could not find host matching read preference { mode: "primary" } for set shard-three\', \'code\': 133, \'codeName\': \'FailedToSatisfyReadPreference\', \'$clusterTime\': {\'clusterTime\': Timestamp(1738546918, 6), \'signature\': {\'hash\': b\'X\\x93_\\xa2\\xc1\\xc7\\xc4\\xcf\\xca\\xc7\\xc6\\x9f\\xdc\\xf6BC`=\\xda\\x05\', \'keyId\': 7467000673607876634}}, \'operationTime\': Timestamp(1738546918, 6)}')
unit-config-server-one-0: 01:41:59 ERROR unit.config-server-one/0.juju-log config-server:9: Failed to add shard-three to cluster
unit-config-server-one-0: 01:41:59 ERROR unit.config-server-one/0.juju-log config-server:9: Deferring _on_relation_event for shards interface since: error=OperationFailure('Could not find host matching read preference { mode: "primary" } for set shard-three, full error: {\'ok\': 0.0, \'errmsg\': \'Could not find host matching read preference { mode: "primary" } for set shard-three\', \'code\': 133, \'codeName\': \'FailedToSatisfyReadPreference\', \'$clusterTime\': {\'clusterTime\': Timestamp(1738546918, 6), \'signature\': {\'hash\': b\'X\\x93_\\xa2\\xc1\\xc7\\xc4\\xcf\\xca\\xc7\\xc6\\x9f\\xdc\\xf6BC`=\\xda\\x05\', \'keyId\': 7467000673607876634}}, \'operationTime\': Timestamp(1738546918, 6)}')
unit-shard-three-0: 01:42:20 ERROR unit.shard-three/0.juju-log _on_secret_remove: Secret secret:cug1s1fflmad061dhb20 seems to have no observers, could be removed
unit-config-server-one-0: 01:46:43 ERROR unit.config-server-one/0.juju-log _on_secret_remove: Secret secret:cug1r1fflmad061dhb0g seems to have no observers, could be removed
unit-shard-two-0: 01:46:44 ERROR unit.shard-two/0.juju-log _on_secret_remove: Secret secret:cug1rmfflmad061dhb1g seems to have no observers, could be removed
unit-shard-one-0: 01:46:44 ERROR unit.shard-one/0.juju-log _on_secret_remove: Secret secret:cug1rffflmad061dhb10 seems to have no observers, could be removed
unit-shard-three-0: 01:46:44 ERROR unit.shard-three/0.juju-log _on_secret_remove: Secret secret:cug1s1fflmad061dhb20 seems to have no observers, could be removed
unit-config-server-one-0: 01:47:49 ERROR unit.config-server-one/0.juju-log database-peers:0: Deferring _on_relation_event for shards interface since: error=AutoReconnect('10.43.176.183:27018: connection closed (configured timeouts: connectTimeoutMS: 2000.0ms)')
unit-config-server-one-1: 01:52:42 ERROR juju.worker.dependency "uniter" manifold worker returned unexpected error: relation scope id "a92f7ec0-5385-4d4b-8ca7-5fc919917f93:r#10#shard-three": settings a92f7ec0-5385-4d4b-8ca7-5fc919917f93:r#10#shard-three not found (not found)
unit-shard-three-0: 01:52:44 ERROR juju.worker.dependency "uniter" manifold worker returned unexpected error: relation scope id "a92f7ec0-5385-4d4b-8ca7-5fc919917f93:r#10#config-server-one": settings a92f7ec0-5385-4d4b-8ca7-5fc919917f93:r#10#config-server-one not found (not found)
machine-5: 02:12:32 ERROR juju.api.watcher error trying to stop watcher: websocket: close sent

[32mINFO    [0m pytest_operator.plugin:plugin.py:991 Forgetting model main...