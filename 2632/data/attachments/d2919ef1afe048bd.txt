[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  shard-one/0 [executing] active: 
  shard-one/1 [executing] active: Primary
  shard-two/0 [executing] active: Primary
  config-server/0 [executing] active: 
  config-server/1 [executing] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/0 [idle] active: 
  config-server/1 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/0 [idle] active: 
  config-server/1 [idle] maintenance: backup started/running, backup id: '2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] maintenance: backup started/running, backup id: '2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] maintenance: backup started/running, backup id: '2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] maintenance: backup started/running, backup id: '2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] maintenance: backup started/running, backup id: '2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] maintenance: backup started/running, backup id: '2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] maintenance: backup started/running, backup id: '2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server/1 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:2301 Deploying local:jammy/mongodb-3
[32mINFO    [0m juju.model:__init__.py:2301 Deploying local:jammy/mongodb-4
[32mINFO    [0m juju.model:__init__.py:2301 Deploying local:jammy/mongodb-5
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  s3-integrator/0 [idle] active: 
  config-server-new/0 [allocating] waiting: waiting for machine
  config-server-new/1 [allocating] waiting: waiting for machine
  shard-one-new/0 [allocating] waiting: waiting for machine
  shard-one-new/1 [allocating] waiting: waiting for machine
  shard-two-new/0 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [allocating] waiting: waiting for machine
  config-server-new/1 [allocating] waiting: waiting for machine
  shard-one-new/0 [allocating] waiting: waiting for machine
  shard-one-new/1 [allocating] waiting: waiting for machine
  shard-two-new/0 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [allocating] waiting: waiting for machine
  config-server-new/1 [allocating] waiting: waiting for machine
  shard-one-new/0 [allocating] waiting: waiting for machine
  shard-one-new/1 [allocating] waiting: waiting for machine
  shard-two-new/0 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [allocating] waiting: installing agent
  config-server-new/1 [allocating] waiting: agent initialising
  shard-one-new/0 [allocating] waiting: waiting for machine
  shard-one-new/1 [allocating] waiting: waiting for machine
  shard-two-new/0 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [executing] maintenance: Installed MongoDB
  config-server-new/1 [executing] maintenance: Installed MongoDB
  shard-one-new/0 [executing] maintenance: Installed MongoDB
  shard-one-new/1 [executing] maintenance: Installed MongoDB
  shard-two-new/0 [executing] maintenance: installing MongoDB
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [executing] active: 
  config-server-new/1 [executing] active: 
  shard-one-new/0 [idle] active: 
  shard-one-new/1 [idle] active: 
  shard-two-new/0 [executing] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [idle] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [executing] active: 
  config-server-new/1 [executing] active: 
  shard-one-new/0 [idle] active: 
  shard-one-new/1 [executing] active: 
  shard-two-new/0 [executing] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [executing] active: 
  config-server-new/1 [executing] active: 
  shard-one-new/0 [idle] maintenance: Adding shard to config-server
  shard-one-new/1 [idle] maintenance: Adding shard to config-server
  shard-two-new/0 [idle] maintenance: Adding shard to config-server
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [executing] waiting: waiting to sync s3 configurations.
  config-server-new/1 [executing] active: 
  shard-one-new/0 [idle] maintenance: Adding shard to config-server
  shard-one-new/1 [idle] maintenance: Adding shard to config-server
  shard-two-new/0 [idle] maintenance: Adding shard to config-server
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [executing] active: 
  config-server-new/1 [executing] active: 
  shard-one-new/0 [idle] maintenance: Adding shard to config-server
  shard-one-new/1 [idle] maintenance: Adding shard to config-server
  shard-two-new/0 [idle] maintenance: Adding shard to config-server
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [idle] active: 
  config-server-new/1 [idle] active: 
  shard-one-new/0 [idle] maintenance: Adding shard to config-server
  shard-one-new/1 [executing] maintenance: Adding shard to config-server
  shard-two-new/0 [executing] maintenance: Adding shard to config-server
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  shard-one-new/0 [executing] maintenance: Adding shard to config-server
  shard-one-new/1 [executing] maintenance: Adding shard to config-server
  shard-two-new/0 [idle] maintenance: Adding shard to config-server
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [idle] active: 
  config-server-new/1 [executing] active: 
  shard-one-new/0 [idle] active: 
  shard-one-new/1 [idle] maintenance: Adding shard to config-server
  shard-two-new/0 [idle] maintenance: Adding shard to config-server
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  shard-one-new/1 [idle] maintenance: Adding shard to config-server
  shard-two-new/0 [idle] maintenance: Adding shard to config-server
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [idle] active: 
  config-server-new/1 [idle] active: 
  shard-one-new/1 [idle] active: Primary
  shard-two-new/0 [idle] maintenance: Adding shard to config-server
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  shard-two-new/0 [idle] maintenance: Adding shard to config-server
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [idle] active: 
  config-server-new/1 [idle] active: 
  shard-two-new/0 [idle] active: Primary
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  shard-one-new/0 [executing] active: 
  shard-one-new/1 [executing] active: Primary
  shard-two-new/0 [executing] active: Primary
  config-server-new/0 [executing] active: 
  config-server-new/1 [executing] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] waiting: Waiting to sync passwords across the cluster
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/0 [idle] active: 
  config-server-new/1 [idle] maintenance: restore started/running, backup id:'2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] maintenance: restore started/running, backup id:'2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] maintenance: restore started/running, backup id:'2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] maintenance: restore started/running, backup id:'2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] maintenance: restore started/running, backup id:'2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] maintenance: restore started/running, backup id:'2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] maintenance: restore started/running, backup id:'2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] maintenance: restore started/running, backup id:'2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] maintenance: restore started/running, backup id:'2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] maintenance: restore started/running, backup id:'2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] maintenance: restore started/running, backup id:'2025-03-02T02:07:45Z'
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-new/1 [idle] active: Primary
[32mINFO    [0m pytest_operator.plugin:plugin.py:903 Model status:

Model  Controller           Cloud/Region         Version  SLA          Timestamp
test   localhost-localhost  localhost/localhost  3.6.1    unsupported  02:33:43Z

App                Version  Status  Scale  Charm          Channel      Rev  Exposed  Message
config-server-new  6.0.6    active      2  mongodb                       3  no       
s3-integrator               active      1  s3-integrator  latest/edge  135  no       
shard-one-new      6.0.6    active      2  mongodb                       4  no       
shard-two-new      6.0.6    active      1  mongodb                       5  no       

Unit                  Workload  Agent  Machine  Public address  Ports            Message
config-server-new/0   active    idle   6        10.229.250.254  27017-27018/tcp  
config-server-new/1*  active    idle   7        10.229.250.125  27017-27018/tcp  Primary
s3-integrator/0*      active    idle   5        10.229.250.162                   
shard-one-new/0       active    idle   8        10.229.250.14   27017/tcp        
shard-one-new/1*      active    idle   9        10.229.250.129  27017/tcp        Primary
shard-two-new/0*      active    idle   10       10.229.250.163  27017/tcp        Primary

Machine  State    Address         Inst id         Base          AZ  Message
5        started  10.229.250.162  juju-11c786-5   ubuntu@22.04      Running
6        started  10.229.250.254  juju-11c786-6   ubuntu@22.04      Running
7        started  10.229.250.125  juju-11c786-7   ubuntu@22.04      Running
8        started  10.229.250.14   juju-11c786-8   ubuntu@22.04      Running
9        started  10.229.250.129  juju-11c786-9   ubuntu@22.04      Running
10       started  10.229.250.163  juju-11c786-10  ubuntu@22.04      Running

[32mINFO    [0m pytest_operator.plugin:plugin.py:909 Juju error logs:

machine-1: 01:31:07 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 01:31:07 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 01:31:07 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 01:31:07 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-1: 01:31:07 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-0: 01:31:07 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-2: 01:31:16 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-2: 01:31:16 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-one-0: 01:31:16 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-3: 01:31:21 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-3: 01:31:21 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-one-1: 01:31:21 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-4: 01:31:30 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-4: 01:31:30 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-two-0: 01:31:31 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-5: 01:31:34 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-5: 01:31:34 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-s3-integrator-0: 01:31:34 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-0: 01:31:41 ERROR unit.config-server/0.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-0: 01:31:41 ERROR unit.config-server/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-config-server-1: 01:31:42 ERROR unit.config-server/1.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-1: 01:31:42 ERROR unit.config-server/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-one-0: 01:31:46 ERROR unit.shard-one/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-one-0: 01:31:46 ERROR unit.shard-one/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-one-1: 01:31:51 ERROR unit.shard-one/1.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-one-1: 01:31:51 ERROR unit.shard-one/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-two-0: 01:31:54 ERROR unit.shard-two/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-two-0: 01:31:54 ERROR unit.shard-two/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-one-0: 01:33:36 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b56ec2443d6c64b23456, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c3b569dd6d9154b5e63b08'), 'counter': 4}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 14477}")>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.000812432001112029>]>
unit-shard-one-0: 01:33:40 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b573c2443d6c64b23457, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c3b569dd6d9154b5e63b08'), 'counter': 4}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 10360}")>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0007459270018443931>]>
unit-shard-one-0: 01:33:44 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b577c2443d6c64b23458, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c3b569dd6d9154b5e63b08'), 'counter': 4}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 6245}")>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0006998490025580395>]>
unit-shard-one-0: 01:33:48 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b57bc2443d6c64b23459, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c3b569dd6d9154b5e63b08'), 'counter': 4}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 2111}")>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0010326880001230165>]>
unit-shard-one-0: 01:34:20 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b59ac07a82f5bfcc1c28, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError('The server is in quiesce mode and will shut down, full error: {\'topologyVersion\': {\'processId\': ObjectId(\'67c3b57ffdb5eb77d12fa267\'), \'counter\': 6}, \'ok\': 0.0, \'errmsg\': \'The server is in quiesce mode and will shut down\', \'code\': 91, \'codeName\': \'ShutdownInProgress\', \'remainingQuiesceTimeMillis\': 4113, \'lastCommittedOpTime\': Timestamp(1740879235, 6), \'$clusterTime\': {\'clusterTime\': Timestamp(1740879255, 1), \'signature\': {\'hash\': b\'H\\x88"D\\xeeW\\x9b]\\xf1\\xff\\x8c:\\x86\\xa5C`\\xc6[\\x1d\\x91\', \'keyId\': 7477018869509390348}}, \'operationTime\': Timestamp(1740879235, 6)}')>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0007797309990564827>]>
unit-shard-one-0: 01:34:24 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b59fc07a82f5bfcc1c29, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError('The server is in quiesce mode and will shut down, full error: {\'topologyVersion\': {\'processId\': ObjectId(\'67c3b57ffdb5eb77d12fa267\'), \'counter\': 6}, \'ok\': 0.0, \'errmsg\': \'The server is in quiesce mode and will shut down\', \'code\': 91, \'codeName\': \'ShutdownInProgress\', \'remainingQuiesceTimeMillis\': 2, \'lastCommittedOpTime\': Timestamp(1740879235, 6), \'$clusterTime\': {\'clusterTime\': Timestamp(1740879255, 1), \'signature\': {\'hash\': b\'H\\x88"D\\xeeW\\x9b]\\xf1\\xff\\x8c:\\x86\\xa5C`\\xc6[\\x1d\\x91\', \'keyId\': 7477018869509390348}}, \'operationTime\': Timestamp(1740879235, 6)}')>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.00067009499980486>]>
unit-shard-one-0: 01:34:28 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b5a3c07a82f5bfcc1c2a, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: RSSecondary, rtt: 0.0007012229980318807>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0006384330008586403>]>
unit-shard-one-0: 01:34:32 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b5a7c07a82f5bfcc1c2b, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c3b5a1ea444d5302cd3e16'), 'counter': 4}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 14986, 'lastCommittedOpTime': Timestamp(0, 0), '$clusterTime': {'clusterTime': Timestamp(1740879265, 1), 'signature': {'hash': b'\\x03\\x95\\xa3\\xd7\\xd3\\x97\\xcb\\xb6M&X|\\xfa\\x15\\xbd\\x96\\xd3\\xb8V]', 'keyId': 7477018869509390348}}, 'operationTime': Timestamp(1740879235, 6)}")>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0005839309997099917>]>
unit-shard-one-0: 01:34:36 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b5abc07a82f5bfcc1c2c, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c3b5a1ea444d5302cd3e16'), 'counter': 4}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 10870, 'lastCommittedOpTime': Timestamp(0, 0), '$clusterTime': {'clusterTime': Timestamp(1740879265, 1), 'signature': {'hash': b'\\x03\\x95\\xa3\\xd7\\xd3\\x97\\xcb\\xb6M&X|\\xfa\\x15\\xbd\\x96\\xd3\\xb8V]', 'keyId': 7477018869509390348}}, 'operationTime': Timestamp(1740879235, 6)}")>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0007682800023758318>]>
unit-shard-one-0: 01:34:40 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b5afc07a82f5bfcc1c2d, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c3b5a1ea444d5302cd3e16'), 'counter': 4}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 6759, 'lastCommittedOpTime': Timestamp(0, 0), '$clusterTime': {'clusterTime': Timestamp(1740879265, 1), 'signature': {'hash': b'\\x03\\x95\\xa3\\xd7\\xd3\\x97\\xcb\\xb6M&X|\\xfa\\x15\\xbd\\x96\\xd3\\xb8V]', 'keyId': 7477018869509390348}}, 'operationTime': Timestamp(1740879235, 6)}")>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0007393040032184217>]>
unit-shard-one-0: 01:34:45 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b5b3c07a82f5bfcc1c2e, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c3b5a1ea444d5302cd3e16'), 'counter': 4}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 2642, 'lastCommittedOpTime': Timestamp(0, 0), '$clusterTime': {'clusterTime': Timestamp(1740879265, 1), 'signature': {'hash': b'\\x03\\x95\\xa3\\xd7\\xd3\\x97\\xcb\\xb6M&X|\\xfa\\x15\\xbd\\x96\\xd3\\xb8V]', 'keyId': 7477018869509390348}}, 'operationTime': Timestamp(1740879235, 6)}")>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0008110000017040875>]>
unit-shard-one-0: 01:34:49 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b5b8c07a82f5bfcc1c2f, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('10.229.250.43:27017: [Errno 111] Connection refused (configured timeouts: socketTimeoutMS: 2000.0ms, connectTimeoutMS: 2000.0ms)')>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0007613859997945838>]>
unit-shard-one-0: 01:34:53 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b5bcc07a82f5bfcc1c30, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: RSSecondary, rtt: 0.0005832400020153727>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0008257369991042651>]>
unit-shard-one-0: 01:34:57 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b5c0c07a82f5bfcc1c31, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: RSSecondary, rtt: 0.0009191829994961154>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0007459660009772051>]>
unit-shard-one-0: 01:35:34 ERROR unit.shard-one/0.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3b5e5c8d4f985083b049e, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.43', 27017) server_type: RSSecondary, rtt: 0.0009086240024771541>, <ServerDescription ('10.229.250.75', 27017) server_type: RSSecondary, rtt: 0.0011233590012125205>]>
unit-shard-one-0: 01:38:13 ERROR unit.shard-one/0.juju-log Backup failed: Relation with s3-integrator charm missing, cannot restore from a backup.
unit-shard-one-0: 01:38:15 ERROR unit.shard-one/0.juju-log List-backups failed: Relation with s3-integrator charm missing, cannot restore from a backup.
unit-shard-one-0: 01:38:17 ERROR unit.shard-one/0.juju-log Restore failed: Relation with s3-integrator charm missing, cannot restore from a backup.
unit-config-server-1: 01:41:19 ERROR unit.config-server/1.juju-log cmd failed - cmd=['/snap/bin/charmed-mongodb.pbm', 'status', '-o', 'json'], stdout={"Error":"get status of cluster: connect to `shard-one` [shard-one/10.229.250.43:27017,10.229.250.75:27017]: ping: connection() error occurred during connection handshake: auth error: unable to authenticate using mechanism \"SCRAM-SHA-256\": (AuthenticationFailed) Authentication failed."}
, stderr=cmd_run.go:1276: WARNING: cannot create user data directory: cannot get the current user: getent could not be executed: exec: "getent": executable file not found in $PATH
cmd_run.go:1281: WARNING: cannot copy user Xauthority file: cannot get the current user: getent could not be executed: exec: "getent": executable file not found in $PATH

unit-config-server-1: 01:41:19 ERROR unit.config-server/1.juju-log Failed to get pbm status: cmd failed (1) - cmd=['/snap/bin/charmed-mongodb.pbm', 'status', '-o', 'json'], stdout={"Error":"get status of cluster: connect to `shard-one` [shard-one/10.229.250.43:27017,10.229.250.75:27017]: ping: connection() error occurred during connection handshake: auth error: unable to authenticate using mechanism \"SCRAM-SHA-256\": (AuthenticationFailed) Authentication failed."}
, stderr=cmd_run.go:1276: WARNING: cannot create user data directory: cannot get the current user: getent could not be executed: exec: "getent": executable file not found in $PATH
cmd_run.go:1281: WARNING: cannot copy user Xauthority file: cannot get the current user: getent could not be executed: exec: "getent": executable file not found in $PATH

unit-config-server-1: 02:12:40 ERROR unit.config-server/1.juju-log config-server:9: cmd failed - cmd=['/snap/bin/charmed-mongodb.pbm', 'status', '-o', 'json'], stdout={"Error":"connect to mongodb: create mongo connection: ping: server selection error: server selection timeout, current topology: { Type: Unknown, Servers: [{ Addr: localhost:27017, Type: RSGhost, Average RTT: 401272 }, ] }"}
, stderr=cmd_run.go:1276: WARNING: cannot create user data directory: cannot get the current user: getent could not be executed: exec: "getent": executable file not found in $PATH
cmd_run.go:1281: WARNING: cannot copy user Xauthority file: cannot get the current user: getent could not be executed: exec: "getent": executable file not found in $PATH

unit-config-server-1: 02:12:40 ERROR unit.config-server/1.juju-log config-server:9: Failed to get pbm status: cmd failed (1) - cmd=['/snap/bin/charmed-mongodb.pbm', 'status', '-o', 'json'], stdout={"Error":"connect to mongodb: create mongo connection: ping: server selection error: server selection timeout, current topology: { Type: Unknown, Servers: [{ Addr: localhost:27017, Type: RSGhost, Average RTT: 401272 }, ] }"}
, stderr=cmd_run.go:1276: WARNING: cannot create user data directory: cannot get the current user: getent could not be executed: exec: "getent": executable file not found in $PATH
cmd_run.go:1281: WARNING: cannot copy user Xauthority file: cannot get the current user: getent could not be executed: exec: "getent": executable file not found in $PATH

machine-7: 02:16:16 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-7: 02:16:16 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-new-1: 02:16:16 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-6: 02:16:17 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-6: 02:16:17 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-new-0: 02:16:17 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-9: 02:16:20 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-9: 02:16:20 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-one-new-1: 02:16:20 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-8: 02:16:21 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-8: 02:16:21 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-one-new-0: 02:16:21 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-10: 02:16:33 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-10: 02:16:33 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-two-new-0: 02:16:33 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-shard-one-new-1: 02:16:44 ERROR unit.shard-one-new/1.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-one-new-1: 02:16:44 ERROR unit.shard-one-new/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-config-server-new-0: 02:16:45 ERROR unit.config-server-new/0.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-new-0: 02:16:45 ERROR unit.config-server-new/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-config-server-new-1: 02:16:46 ERROR unit.config-server-new/1.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-new-1: 02:16:46 ERROR unit.config-server-new/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-one-new-0: 02:16:46 ERROR unit.shard-one-new/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-one-new-0: 02:16:46 ERROR unit.shard-one-new/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-config-server-new-0: 02:16:50 ERROR unit.config-server-new/0.juju-log This operation (update_relation_data()) can only be performed by the leader unit
unit-shard-two-new-0: 02:17:01 ERROR unit.shard-two-new/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-two-new-0: 02:17:01 ERROR unit.shard-two-new/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-one-new-1: 02:19:45 ERROR unit.shard-one-new/1.juju-log sharding:17: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3c04059480583e5d24569, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.129', 27017) server_type: RSSecondary, rtt: 0.000819105000118725>, <ServerDescription ('10.229.250.14', 27017) server_type: RSSecondary, rtt: 0.0008753319998504594>]>
unit-shard-one-new-1: 02:19:49 ERROR unit.shard-one-new/1.juju-log sharding:17: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3c04459480583e5d2456a, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.129', 27017) server_type: RSSecondary, rtt: 0.0006978869969316293>, <ServerDescription ('10.229.250.14', 27017) server_type: RSSecondary, rtt: 0.000742349999200087>]>
unit-shard-one-new-1: 02:19:53 ERROR unit.shard-one-new/1.juju-log sharding:17: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3c04859480583e5d2456b, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.129', 27017) server_type: RSSecondary, rtt: 0.0007326820013986435>, <ServerDescription ('10.229.250.14', 27017) server_type: RSSecondary, rtt: 0.0007132659993658308>]>
unit-shard-one-new-1: 02:20:23 ERROR unit.shard-one-new/1.juju-log sharding:17: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3c066a0b0a1be0be90773, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.129', 27017) server_type: RSSecondary, rtt: 0.0008141959988279268>, <ServerDescription ('10.229.250.14', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c3c03e541c15d437e194d2'), 'counter': 10}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 4188, 'lastCommittedOpTime': Timestamp(1740881999, 7), '$clusterTime': {'clusterTime': Timestamp(1740882018, 1), 'signature': {'hash': b'\\x17\\xb9\\x82\\x13N\\xdcz\\x9e\\xc9\\xd9\\x89o\\\\\\xe8q\\xa2\\xfe_\\xb4\\xc4', 'keyId': 7477030474511024153}}, 'operationTime': Timestamp(1740881999, 7)}")>]>
unit-shard-one-new-1: 02:20:27 ERROR unit.shard-one-new/1.juju-log sharding:17: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c3c06aa0b0a1be0be90774, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.229.250.129', 27017) server_type: RSSecondary, rtt: 0.000869439998496091>, <ServerDescription ('10.229.250.14', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c3c03e541c15d437e194d2'), 'counter': 10}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 68, 'lastCommittedOpTime': Timestamp(1740881999, 7), '$clusterTime': {'clusterTime': Timestamp(1740882018, 1), 'signature': {'hash': b'\\x17\\xb9\\x82\\x13N\\xdcz\\x9e\\xc9\\xd9\\x89o\\\\\\xe8q\\xa2\\xfe_\\xb4\\xc4', 'keyId': 7477030474511024153}}, 'operationTime': Timestamp(1740881999, 7)}")>]>
unit-config-server-new-1: 02:27:38 ERROR unit.config-server-new/1.juju-log Restore failed: Cannot restore backup, 'remap-pattern' must be set.

[32mINFO    [0m pytest_operator.plugin:plugin.py:991 Forgetting model main...