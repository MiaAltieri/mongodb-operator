[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  replication/0 [executing] maintenance: enabling TLS
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  replication/0 [idle] blocked: sharding interface cannot be used by replicas
[32mINFO    [0m pytest_operator.plugin:plugin.py:903 Model status:

Model  Controller           Cloud/Region         Version  SLA          Timestamp
test   localhost-localhost  localhost/localhost  3.6.1    unsupported  01:39:20Z

App                       Version  Status   Scale  Charm                     Channel        Rev  Exposed  Message
application                        active       1  application                                0  no       
application-host                   active       1  application                                0  no       
config-server-one                  active       1  mongodb                                    0  no       
config-server-two                  active       1  mongodb                                    1  no       
mongos                             active       1  mongos                    6/edge          38  no       
replication                        active       1  mongodb                                    3  no       
s3-integrator                      blocked      1  s3-integrator             latest/edge    118  no       Missing parameters: ['access-key', 'secret-key']
self-signed-certificates           active       1  self-signed-certificates  latest/stable  155  no       
shard                              active       1  mongodb                                    2  no       

Unit                         Workload  Agent  Machine  Public address  Ports            Message
application-host/0*          active    idle   5        10.130.88.5                      
  mongos/0*                  waiting   idle            10.130.88.5                      Waiting for secrets from config-server
application/0*               active    idle   7        10.130.88.45                     
config-server-one/0*         active    idle   0        10.130.88.189   27017-27018/tcp  
config-server-two/0*         active    idle   1        10.130.88.147   27017-27018/tcp  
replication/0*               blocked   idle   6        10.130.88.224   27017/tcp        sharding interface cannot be used by replicas
s3-integrator/0*             blocked   idle   4        10.130.88.162                    Missing parameters: ['access-key', 'secret-key']
self-signed-certificates/0*  active    idle   3        10.130.88.142                    
shard/0*                     blocked   idle   2        10.130.88.87    27017/tcp        Relation to s3-integrator is not supported, config role must be config-server

Machine  State    Address        Inst id        Base          AZ  Message
0        started  10.130.88.189  juju-e03149-0  ubuntu@22.04      Running
1        started  10.130.88.147  juju-e03149-1  ubuntu@22.04      Running
2        started  10.130.88.87   juju-e03149-2  ubuntu@22.04      Running
3        started  10.130.88.142  juju-e03149-3  ubuntu@22.04      Running
4        started  10.130.88.162  juju-e03149-4  ubuntu@22.04      Running
5        started  10.130.88.5    juju-e03149-5  ubuntu@22.04      Running
6        started  10.130.88.224  juju-e03149-6  ubuntu@22.04      Running
7        started  10.130.88.45   juju-e03149-7  ubuntu@20.04      Running

[32mINFO    [0m pytest_operator.plugin:plugin.py:909 Juju error logs:

machine-0: 01:33:33 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 01:33:33 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-one-0: 01:33:33 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-one-0: 01:33:58 ERROR unit.config-server-one/0.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-one-0: 01:33:58 ERROR unit.config-server-one/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
machine-1: 01:33:59 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 01:33:59 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-two-0: 01:33:59 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-2: 01:34:22 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-2: 01:34:22 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-0: 01:34:22 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-4: 01:34:28 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-4: 01:34:28 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-s3-integrator-0: 01:34:28 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-3: 01:34:29 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-3: 01:34:29 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-5: 01:34:29 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-5: 01:34:29 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-application-host-0: 01:34:29 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-self-signed-certificates-0: 01:34:29 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-two-0: 01:34:29 ERROR unit.config-server-two/0.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-two-0: 01:34:29 ERROR unit.config-server-two/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-config-server-one-0: 01:34:38 ERROR unit.config-server-one/0.juju-log _on_secret_remove: Secret secret:cugmt5v1kh4d0420pgf0 seems to have no observers, could be removed
unit-shard-0: 01:34:46 ERROR unit.shard/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-0: 01:34:46 ERROR unit.shard/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
machine-7: 01:34:51 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-7: 01:34:51 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-application-0: 01:34:51 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-6: 01:35:00 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-6: 01:35:00 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-replication-0: 01:35:00 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-two-0: 01:35:05 ERROR unit.config-server-two/0.juju-log _on_secret_remove: Secret secret:cugmtd71kh4d0420pgg0 seems to have no observers, could be removed
unit-replication-0: 01:35:16 ERROR unit.replication/0.juju-log Unable to set params: ['vm.max_map_count']
unit-replication-0: 01:35:16 ERROR unit.replication/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-0: 01:35:23 ERROR unit.shard/0.juju-log _on_secret_remove: Secret secret:cugmthv1kh4d0420pggg seems to have no observers, could be removed
unit-mongos-0: 01:35:48 ERROR juju.worker.meterstatus error running "meter-status-changed": exit status 2
unit-replication-0: 01:35:56 ERROR unit.replication/0.juju-log _on_secret_remove: Secret secret:cugmtq71kh4d0420pgh0 seems to have no observers, could be removed
unit-shard-0: 01:36:38 ERROR juju.worker.uniter resolver loop error: permission denied
unit-config-server-one-0: 01:36:38 ERROR juju.worker.uniter resolver loop error: permission denied
unit-shard-0: 01:36:38 ERROR juju.worker.dependency "uniter" manifold worker returned unexpected error: permission denied
unit-config-server-one-0: 01:36:38 ERROR juju.worker.dependency "uniter" manifold worker returned unexpected error: permission denied
unit-shard-0: 01:37:00 ERROR unit.shard/0.juju-log database:13: Charm is in sharding role: shard. Does not support database interface.
unit-shard-0: 01:37:00 ERROR unit.shard/0.juju-log database:13: Charm is in sharding role: shard. Does not support database interface.
unit-config-server-one-0: 01:37:01 ERROR unit.config-server-one/0.juju-log database:14: Charm is in sharding role: config-server. Does not support database interface.
unit-config-server-one-0: 01:37:01 ERROR unit.config-server-one/0.juju-log database:14: Charm is in sharding role: config-server. Does not support database interface.
unit-config-server-one-0: 01:37:02 ERROR unit.config-server-one/0.juju-log database:14: Charm is in sharding role: config-server. Does not support database interface.
unit-shard-0: 01:37:02 ERROR unit.shard/0.juju-log database:13: Charm is in sharding role: shard. Does not support database interface.
unit-config-server-one-0: 01:37:04 ERROR unit.config-server-one/0.juju-log database:14: Charm is in sharding role: config-server. Does not support database interface.
unit-shard-0: 01:37:07 ERROR unit.shard/0.juju-log database:13: Charm is in sharding role: shard. Does not support database interface.
unit-config-server-one-0: 01:37:08 ERROR unit.config-server-one/0.juju-log database:14: Charm is in sharding role: config-server. Does not support database interface.
unit-replication-0: 01:37:31 ERROR unit.replication/0.juju-log sharding:15: Charm is in sharding role: replication. Does not support sharding interface.
unit-replication-0: 01:37:31 ERROR unit.replication/0.juju-log sharding:15: Charm is in sharding role: replication. Does not support sharding interface.
unit-config-server-one-0: 01:37:32 ERROR unit.config-server-one/0.juju-log config-server:15: Failed to add shard replication to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738633051, 1), 'signature': {'hash': b'\\x08[\\x96V\\x16->\\xf2\\xe8\\xcf\\x9f\\xf2\\xa1\\x020\\xdb\\xa6\\xdaq\\x04', 'keyId': 7467371286335848473}}, 'operationTime': Timestamp(1738633051, 1)}")
unit-config-server-one-0: 01:37:32 ERROR unit.config-server-one/0.juju-log config-server:15: replication shard does not have the same auth as the config server.
unit-replication-0: 01:37:35 ERROR unit.replication/0.juju-log sharding:15: Charm is in sharding role: replication. Does not support sharding interface.
unit-replication-0: 01:37:37 ERROR unit.replication/0.juju-log sharding:15: Charm is in sharding role: replication. Does not support sharding interface.
unit-shard-0: 01:37:38 ERROR juju.worker.dependency "uniter" manifold worker returned unexpected error: relation scope id "3d0aee83-ae16-4415-8d6e-8b194fe03149:r#16#replication": settings 3d0aee83-ae16-4415-8d6e-8b194fe03149:r#16#replication not found (not found)
unit-replication-0: 01:37:38 ERROR juju.worker.dependency "uniter" manifold worker returned unexpected error: relation scope id "3d0aee83-ae16-4415-8d6e-8b194fe03149:r#16#shard": settings 3d0aee83-ae16-4415-8d6e-8b194fe03149:r#16#shard not found (not found)
unit-mongos-0: 01:38:05 ERROR unit.mongos/0.juju-log cluster:17: Can't delete secret for relation 11
unit-mongos-0: 01:38:30 ERROR unit.mongos/0.juju-log cluster:18: Can't delete secret for relation 11
unit-replication-0: 01:38:37 ERROR unit.replication/0.juju-log certificates:20: Non-existing secret unit:int-cert-secret was attempted to be removed.
unit-config-server-one-0: 01:38:37 ERROR unit.config-server-one/0.juju-log config-server:21: Failed to add shard replication to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738633116, 1), 'signature': {'hash': b'\\x1a\\xffU\\xf6\\x8a\\x1e&h\\xc5\\xf5\\x989\\x8a{\\xa4\\xf93\\x05\\xf3\\x89', 'keyId': 7467371286335848473}}, 'operationTime': Timestamp(1738633116, 1)}")
unit-config-server-one-0: 01:38:37 ERROR unit.config-server-one/0.juju-log config-server:21: replication shard does not have the same auth as the config server.
unit-replication-0: 01:38:38 ERROR unit.replication/0.juju-log certificates:20: Non-existing secret unit:ext-cert-secret was attempted to be removed.
unit-config-server-one-0: 01:38:39 ERROR unit.config-server-one/0.juju-log config-server:21: Failed to add shard replication to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738633118, 2), 'signature': {'hash': b'\\xa4\\xd6\\xdc\\xa8\\xae9l\\x9fIN\\xad\\x857\\xcf\\xe2\\xc5n2\\xaa\\x1f', 'keyId': 7467371286335848473}}, 'operationTime': Timestamp(1738633118, 2)}")
unit-config-server-one-0: 01:38:39 ERROR unit.config-server-one/0.juju-log config-server:21: replication shard does not have the same auth as the config server.
unit-replication-0: 01:38:39 ERROR unit.replication/0.juju-log sharding:21: Charm is in sharding role: replication. Does not support sharding interface.
unit-config-server-one-0: 01:38:39 ERROR unit.config-server-one/0.juju-log config-server:21: Failed to add shard replication to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738633118, 2), 'signature': {'hash': b'\\xa4\\xd6\\xdc\\xa8\\xae9l\\x9fIN\\xad\\x857\\xcf\\xe2\\xc5n2\\xaa\\x1f', 'keyId': 7467371286335848473}}, 'operationTime': Timestamp(1738633118, 2)}")
unit-config-server-one-0: 01:38:39 ERROR unit.config-server-one/0.juju-log config-server:21: replication shard does not have the same auth as the config server.
unit-config-server-one-0: 01:38:44 ERROR unit.config-server-one/0.juju-log config-server:21: Failed to add shard replication to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738633123, 2), 'signature': {'hash': b'K\\xad\\xe4\\x0c}/\\xc9=\\x80@o\\xd8\\xca\\xa7\\xe3\\x15\\xb7WK\\xbc', 'keyId': 7467371286335848473}}, 'operationTime': Timestamp(1738633123, 2)}")
unit-config-server-one-0: 01:38:44 ERROR unit.config-server-one/0.juju-log config-server:21: replication shard does not have the same auth as the config server.
unit-config-server-one-0: 01:38:44 ERROR unit.config-server-one/0.juju-log config-server:21: Failed to add shard replication to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738633123, 2), 'signature': {'hash': b'K\\xad\\xe4\\x0c}/\\xc9=\\x80@o\\xd8\\xca\\xa7\\xe3\\x15\\xb7WK\\xbc', 'keyId': 7467371286335848473}}, 'operationTime': Timestamp(1738633123, 2)}")
unit-config-server-one-0: 01:38:44 ERROR unit.config-server-one/0.juju-log config-server:21: replication shard does not have the same auth as the config server.
unit-config-server-one-0: 01:38:44 ERROR unit.config-server-one/0.juju-log config-server:21: Failed to add shard replication to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1738633123, 2), 'signature': {'hash': b'K\\xad\\xe4\\x0c}/\\xc9=\\x80@o\\xd8\\xca\\xa7\\xe3\\x15\\xb7WK\\xbc', 'keyId': 7467371286335848473}}, 'operationTime': Timestamp(1738633123, 2)}")
unit-config-server-one-0: 01:38:44 ERROR unit.config-server-one/0.juju-log config-server:21: replication shard does not have the same auth as the config server.
unit-replication-0: 01:38:51 ERROR unit.replication/0.juju-log _on_secret_remove: Secret secret:cugmv7f1kh4d0420pgig seems to have no observers, could be removed
unit-replication-0: 01:38:55 ERROR juju.worker.dependency "uniter" manifold worker returned unexpected error: relation scope id "3d0aee83-ae16-4415-8d6e-8b194fe03149:r#20#self-signed-certificates": settings 3d0aee83-ae16-4415-8d6e-8b194fe03149:r#20#self-signed-certificates not found (not found)
unit-replication-0: 01:38:59 ERROR unit.replication/0.juju-log sharding:21: Charm is in sharding role: replication. Does not support sharding interface.

[32mINFO    [0m pytest_operator.plugin:plugin.py:991 Forgetting model main...