{"uid":"1de6c9f9da51c11","name":"test_rotate_tls","fullName":"tests.integration.sharding_tests.test_sharding_tls#test_rotate_tls","historyId":"b780c5055f3e704a039aa33e1bf41fa6","time":{"start":1740016178157,"stop":1740016189226,"duration":11069},"description":"Tests that each cluster component can rotate TLS certs.","descriptionHtml":"<p>Tests that each cluster component can rotate TLS certs.</p>\n","status":"failed","statusMessage":"AssertionError: setting external and internal key failed.\nassert 'failed' == 'completed'\n  \n  - completed\n  + failed","statusTrace":"Traceback (most recent call last):\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: TResult | None = func()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 242, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/threadexception.py\", line 92, in pytest_runtest_call\n    yield from thread_exception_runtest_hook()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/threadexception.py\", line 68, in thread_exception_runtest_hook\n    yield\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/unraisableexception.py\", line 95, in pytest_runtest_call\n    yield from unraisable_exception_runtest_hook()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/unraisableexception.py\", line 70, in unraisable_exception_runtest_hook\n    yield\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/logging.py\", line 846, in pytest_runtest_call\n    yield from self._runtest_for(item, \"call\")\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/logging.py\", line 829, in _runtest_for\n    yield\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/capture.py\", line 880, in pytest_runtest_call\n    return (yield)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/skipping.py\", line 257, in pytest_runtest_call\n    return (yield)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 174, in pytest_runtest_call\n    item.runtest()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1627, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 159, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/tests/integration/sharding_tests/test_sharding_tls.py\", line 92, in test_rotate_tls\n    await rotate_and_verify_certs(ops_test, cluster_app)\n  File \"/home/ubuntu/actions-runner/_work/mongodb-operator/mongodb-operator/tests/integration/sharding_tests/test_sharding_tls.py\", line 319, in rotate_and_verify_certs\n    assert action.status == \"completed\", \"setting external and internal key failed.\"\nAssertionError: setting external and internal key failed.\nassert 'failed' == 'completed'\n  \n  - completed\n  + failed","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1740015489009,"stop":1740015489010,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1740015489010,"stop":1740015489010,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1740015489010,"stop":1740015489160,"duration":150},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1740016178157,"stop":1740016178157,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"abort_on_fail::0","time":{"start":1740016189229,"stop":1740016189229,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1740016189237,"stop":1740016189594,"duration":357},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1740016189595,"stop":1740016189595,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1740016189595,"stop":1740016189595,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1740016189595,"stop":1740016189595,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"runner(['self-hosted', 'linux', 'X64', 'jammy', 'large'])"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.sharding_tests"},{"name":"suite","value":"test_sharding_tls"},{"name":"host","value":"github-runner"},{"name":"thread","value":"13062-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.sharding_tests.test_sharding_tls"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"7db255f1a9dbe52f","status":"unknown","time":{}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":6,"passed":169,"unknown":5,"total":181},"items":[{"uid":"6d2cc3411b718a2b","reportUrl":"../2619//#testresult/6d2cc3411b718a2b","status":"passed","time":{"start":1739929555278,"stop":1739930513302,"duration":958024}},{"uid":"84de563455c80fec","reportUrl":"../2618//#testresult/84de563455c80fec","status":"passed","time":{"start":1739843199937,"stop":1739843776637,"duration":576700}},{"uid":"8d02e30c777bbf40","reportUrl":"../2617//#testresult/8d02e30c777bbf40","status":"passed","time":{"start":1739756358085,"stop":1739756891334,"duration":533249}},{"uid":"cfeea5c0a342ae2","reportUrl":"../2616//#testresult/cfeea5c0a342ae2","status":"passed","time":{"start":1739670105476,"stop":1739670600424,"duration":494948}},{"uid":"5ca19016c2645ad6","reportUrl":"../2615//#testresult/5ca19016c2645ad6","status":"passed","time":{"start":1739583711317,"stop":1739584666266,"duration":954949}},{"uid":"2fa05c017690129c","reportUrl":"../2614//#testresult/2fa05c017690129c","status":"passed","time":{"start":1739497931970,"stop":1739498421269,"duration":489299}},{"uid":"14dd772a38a418a0","reportUrl":"../2613//#testresult/14dd772a38a418a0","status":"passed","time":{"start":1739412018882,"stop":1739412561175,"duration":542293}},{"uid":"29cbffdd80a0661a","reportUrl":"../2603//#testresult/29cbffdd80a0661a","status":"passed","time":{"start":1739239393407,"stop":1739239915989,"duration":522582}},{"uid":"ae27c240d74d489e","reportUrl":"../2589//#testresult/ae27c240d74d489e","status":"passed","time":{"start":1739152049179,"stop":1739152533131,"duration":483952}},{"uid":"d1fce6af7771baa","reportUrl":"../2588//#testresult/d1fce6af7771baa","status":"passed","time":{"start":1739065562213,"stop":1739066024569,"duration":462356}},{"uid":"23f3ca255365dda","reportUrl":"../2587//#testresult/23f3ca255365dda","status":"passed","time":{"start":1738979291848,"stop":1738979779479,"duration":487631}},{"uid":"5077a9550f27c42","reportUrl":"../2579//#testresult/5077a9550f27c42","status":"passed","time":{"start":1738892828798,"stop":1738893292460,"duration":463662}},{"uid":"2dbaec79c223a720","reportUrl":"../2576//#testresult/2dbaec79c223a720","status":"passed","time":{"start":1738806361233,"stop":1738806807251,"duration":446018}},{"uid":"c8d07dd1ad6b5e02","reportUrl":"../2570//#testresult/c8d07dd1ad6b5e02","status":"passed","time":{"start":1738720124050,"stop":1738720603219,"duration":479169}},{"uid":"e62d135c9366a539","reportUrl":"../2562//#testresult/e62d135c9366a539","status":"passed","time":{"start":1738633634240,"stop":1738634090792,"duration":456552}},{"uid":"4bb8ecc01b5e4342","reportUrl":"../2559//#testresult/4bb8ecc01b5e4342","status":"passed","time":{"start":1738547219959,"stop":1738547680787,"duration":460828}},{"uid":"4c5ab2159e69b8db","reportUrl":"../2558//#testresult/4c5ab2159e69b8db","status":"passed","time":{"start":1738461397188,"stop":1738461898714,"duration":501526}},{"uid":"7372f641d917ee28","reportUrl":"../2557//#testresult/7372f641d917ee28","status":"passed","time":{"start":1738374423048,"stop":1738374891974,"duration":468926}},{"uid":"606304b88debe8d8","reportUrl":"../2548//#testresult/606304b88debe8d8","status":"passed","time":{"start":1738287939042,"stop":1738288395154,"duration":456112}},{"uid":"4971ef062575c376","reportUrl":"../2543//#testresult/4971ef062575c376","status":"passed","time":{"start":1738202223743,"stop":1738202749611,"duration":525868}}]},"tags":["runner(['self-hosted', 'linux', 'X64', 'jammy', 'large'])","asyncio","abort_on_fail","group(1)"]},"source":"1de6c9f9da51c11.json","parameterValues":[]}