[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [allocating] waiting: waiting for machine
  config-server-one/1 [allocating] waiting: waiting for machine
  shard-one/0 [allocating] waiting: waiting for machine
  shard-one/1 [allocating] waiting: waiting for machine
  shard-two/0 [allocating] waiting: waiting for machine
  shard-two/1 [allocating] waiting: waiting for machine
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [allocating] waiting: waiting for machine
  config-server-one/1 [allocating] waiting: waiting for machine
  shard-one/0 [allocating] waiting: waiting for machine
  shard-one/1 [allocating] waiting: waiting for machine
  shard-two/0 [allocating] waiting: waiting for machine
  shard-two/1 [allocating] waiting: waiting for machine
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [allocating] waiting: waiting for machine
  config-server-one/1 [allocating] waiting: waiting for machine
  shard-one/0 [allocating] waiting: waiting for machine
  shard-one/1 [allocating] waiting: waiting for machine
  shard-two/0 [allocating] waiting: waiting for machine
  shard-two/1 [allocating] waiting: waiting for machine
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [allocating] waiting: waiting for machine
  config-server-one/1 [allocating] waiting: waiting for machine
  shard-one/0 [allocating] waiting: waiting for machine
  shard-one/1 [allocating] waiting: waiting for machine
  shard-two/0 [allocating] waiting: waiting for machine
  shard-two/1 [allocating] waiting: waiting for machine
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [allocating] waiting: waiting for machine
  config-server-one/1 [allocating] waiting: waiting for machine
  shard-one/0 [allocating] waiting: waiting for machine
  shard-one/1 [allocating] waiting: waiting for machine
  shard-two/0 [allocating] waiting: waiting for machine
  shard-two/1 [allocating] waiting: waiting for machine
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [allocating] waiting: agent initialising
  config-server-one/1 [allocating] waiting: agent initialising
  shard-one/0 [allocating] waiting: waiting for machine
  shard-one/1 [allocating] waiting: waiting for machine
  shard-two/0 [allocating] waiting: waiting for machine
  shard-two/1 [allocating] waiting: waiting for machine
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [executing] maintenance: installing MongoDB
  config-server-one/1 [executing] maintenance: installing MongoDB
  shard-one/0 [executing] maintenance: installing MongoDB
  shard-one/1 [executing] maintenance: installing MongoDB
  shard-two/0 [allocating] waiting: agent initialising
  shard-two/1 [allocating] waiting: agent initialising
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [executing] maintenance: starting MongoDB
  config-server-one/1 [executing] maintenance: starting MongoDB
  shard-one/0 [executing] maintenance: starting MongoDB
  shard-one/1 [executing] maintenance: Adding shard to config-server
  shard-two/0 [executing] maintenance: installing MongoDB
  shard-two/1 [executing] maintenance: installing MongoDB
  shard-three/0 [executing] maintenance: installing charm software
  shard-three/1 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [executing] active: 
  config-server-one/1 [executing] active: 
  shard-one/0 [executing] active: 
  shard-one/1 [executing] active: 
  shard-two/0 [executing] active: 
  shard-two/1 [executing] active: 
  shard-three/0 [executing] maintenance: Adding shard to config-server
  shard-three/1 [executing] maintenance: Adding shard to config-server
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [executing] maintenance: Adding shard shard-one to config-server
  config-server-one/1 [executing] active: 
  shard-one/0 [executing] active: 
  shard-one/1 [executing] active: 
  shard-two/0 [executing] active: 
  shard-two/1 [executing] active: 
  shard-three/0 [executing] active: 
  shard-three/1 [executing] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [executing] active: 
  config-server-one/1 [idle] active: 
  shard-one/1 [executing] active: 
  shard-two/0 [executing] active: 
  shard-two/1 [executing] active: 
  shard-three/0 [executing] active: 
  shard-three/1 [executing] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [executing] active: 
  config-server-one/1 [idle] active: 
  shard-one/1 [idle] active: 
  shard-two/0 [idle] active: 
  shard-two/1 [executing] active: 
  shard-three/1 [executing] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [executing] active: 
  shard-one/0 [idle] active: Primary
  shard-one/1 [executing] active: 
  shard-two/0 [idle] active: 
  shard-two/1 [executing] active: 
  shard-three/0 [idle] active: 
  shard-three/1 [executing] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [idle] active: 
  config-server-one/1 [idle] active: 
  shard-one/0 [idle] active: Primary
  shard-one/1 [idle] active: 
  shard-two/0 [idle] active: 
  shard-two/1 [idle] active: 
  shard-three/0 [idle] active: 
  shard-three/1 [idle] active:
[32mINFO    [0m pytest_operator.plugin:plugin.py:903 Model status:

Model  Controller           Cloud/Region         Version  SLA          Timestamp
test   localhost-localhost  localhost/localhost  3.6.1    unsupported  01:47:41Z

App                Version  Status  Scale  Charm    Channel  Rev  Exposed  Message
config-server-one  6.0.6    active      2  mongodb             0  no       
shard-one          6.0.6    active      2  mongodb             1  no       
shard-three        6.0.6    active      2  mongodb             3  no       
shard-two          6.0.6    active      2  mongodb             2  no       

Unit                  Workload  Agent  Machine  Public address  Ports            Message
config-server-one/0*  active    idle   0        10.21.139.154   27017-27018/tcp  
config-server-one/1   active    idle   1        10.21.139.225   27017-27018/tcp  
shard-one/0           active    idle   2        10.21.139.42    27017/tcp        Primary
shard-one/1*          active    idle   3        10.21.139.224   27017/tcp        
shard-three/0         active    idle   6        10.21.139.151   27017/tcp        
shard-three/1*        active    idle   7        10.21.139.201   27017/tcp        Primary
shard-two/0           active    idle   4        10.21.139.157   27017/tcp        
shard-two/1*          active    idle   5        10.21.139.15    27017/tcp        

Machine  State    Address        Inst id        Base          AZ  Message
0        started  10.21.139.154  juju-2e9b8e-0  ubuntu@22.04      Running
1        started  10.21.139.225  juju-2e9b8e-1  ubuntu@22.04      Running
2        started  10.21.139.42   juju-2e9b8e-2  ubuntu@22.04      Running
3        started  10.21.139.224  juju-2e9b8e-3  ubuntu@22.04      Running
4        started  10.21.139.157  juju-2e9b8e-4  ubuntu@22.04      Running
5        started  10.21.139.15   juju-2e9b8e-5  ubuntu@22.04      Running
6        started  10.21.139.151  juju-2e9b8e-6  ubuntu@22.04      Running
7        started  10.21.139.201  juju-2e9b8e-7  ubuntu@22.04      Running

[32mINFO    [0m pytest_operator.plugin:plugin.py:909 Juju error logs:

machine-0: 01:43:19 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 01:43:19 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-one-0: 01:43:20 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-1: 01:43:20 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 01:43:20 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-one-1: 01:43:20 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-3: 01:43:27 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-3: 01:43:27 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-one-1: 01:43:27 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-2: 01:43:28 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-2: 01:43:28 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-one-0: 01:43:28 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-5: 01:43:47 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-5: 01:43:47 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-two-1: 01:43:47 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-4: 01:43:47 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-4: 01:43:47 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-two-0: 01:43:48 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-one-0: 01:44:00 ERROR unit.config-server-one/0.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-one-0: 01:44:00 ERROR unit.config-server-one/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-config-server-one-1: 01:44:02 ERROR unit.config-server-one/1.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-one-1: 01:44:02 ERROR unit.config-server-one/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
machine-6: 01:44:07 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-6: 01:44:07 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-7: 01:44:07 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-7: 01:44:07 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-three-1: 01:44:07 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-shard-three-0: 01:44:07 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-shard-one-0: 01:44:07 ERROR unit.shard-one/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-one-0: 01:44:07 ERROR unit.shard-one/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-one-1: 01:44:08 ERROR unit.shard-one/1.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-one-1: 01:44:08 ERROR unit.shard-one/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-two-1: 01:44:27 ERROR unit.shard-two/1.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-two-1: 01:44:27 ERROR unit.shard-two/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-two-0: 01:44:27 ERROR unit.shard-two/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-two-0: 01:44:27 ERROR unit.shard-two/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-three-0: 01:44:44 ERROR unit.shard-three/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-three-0: 01:44:44 ERROR unit.shard-three/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-three-1: 01:44:45 ERROR unit.shard-three/1.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-three-1: 01:44:45 ERROR unit.shard-three/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-three-0: 01:44:54 ERROR unit.shard-three/0.juju-log This operation (update_relation_data()) can only be performed by the leader unit
unit-shard-one-1: 01:45:51 ERROR unit.shard-one/1.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67b6894e7c8cfd72d4ea3460, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.21.139.224', 27017) server_type: RSSecondary, rtt: 0.0011062010016757995>, <ServerDescription ('10.21.139.42', 27017) server_type: RSSecondary, rtt: 0.001105940000343253>]>
unit-shard-two-1: 01:46:09 ERROR unit.shard-two/1.juju-log sharding:9: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67b689602a5ea2dc46d3d74e, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.21.139.15', 27017) server_type: RSSecondary, rtt: 0.0010248109992971877>, <ServerDescription ('10.21.139.157', 27017) server_type: RSSecondary, rtt: 0.0007236270012072055>]>
unit-shard-two-1: 01:46:14 ERROR unit.shard-two/1.juju-log sharding:9: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67b689642a5ea2dc46d3d74f, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.21.139.15', 27017) server_type: RSSecondary, rtt: 0.0009716299991850974>, <ServerDescription ('10.21.139.157', 27017) server_type: RSSecondary, rtt: 0.0011056620005547302>]>
unit-shard-three-1: 01:46:51 ERROR unit.shard-three/1.juju-log sharding:10: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67b6898a84c16d70a1694a29, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.21.139.151', 27017) server_type: RSSecondary, rtt: 0.0009634899997763569>, <ServerDescription ('10.21.139.201', 27017) server_type: RSSecondary, rtt: 0.0009961800005839905>]>
unit-shard-one-1: 01:46:52 ERROR unit.shard-one/1.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67b6898b88c99e6dbe8d4ed0, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.21.139.224', 27017) server_type: RSSecondary, rtt: 0.0009654599998611957>, <ServerDescription ('10.21.139.42', 27017) server_type: RSSecondary, rtt: 0.0009528199989290442>]>
unit-shard-two-1: 01:46:54 ERROR unit.shard-two/1.juju-log sharding:9: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67b6898d36978f41d2560550, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.21.139.15', 27017) server_type: RSSecondary, rtt: 0.0006223659984243568>, <ServerDescription ('10.21.139.157', 27017) server_type: RSSecondary, rtt: 0.0012741439986712066>]>
unit-shard-three-1: 01:46:56 ERROR unit.shard-three/1.juju-log sharding:10: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67b6898e84c16d70a1694a2a, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.21.139.151', 27017) server_type: RSSecondary, rtt: 0.00062029699984123>, <ServerDescription ('10.21.139.201', 27017) server_type: RSSecondary, rtt: 0.001834218999647419>]>
unit-shard-one-1: 01:46:56 ERROR unit.shard-one/1.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67b6898f88c99e6dbe8d4ed1, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.21.139.224', 27017) server_type: RSSecondary, rtt: 0.0023292440000659553>, <ServerDescription ('10.21.139.42', 27017) server_type: RSSecondary, rtt: 0.0010842299998330418>]>
unit-shard-two-1: 01:46:58 ERROR unit.shard-two/1.juju-log sharding:9: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67b6899136978f41d2560551, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.21.139.15', 27017) server_type: RSSecondary, rtt: 0.0012938830004713964>, <ServerDescription ('10.21.139.157', 27017) server_type: RSSecondary, rtt: 0.0010368100010964554>]>

[32mINFO    [0m pytest_operator.plugin:plugin.py:991 Forgetting model main...