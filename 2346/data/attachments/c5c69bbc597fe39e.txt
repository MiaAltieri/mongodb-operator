[32mINFO    [0m pytest_operator.plugin:plugin.py:903 Model status:

Model  Controller           Cloud/Region         Version  SLA          Timestamp
test   localhost-localhost  localhost/localhost  3.5.3    unsupported  02:47:02Z

App                Version  Status   Scale  Charm          Channel      Rev  Exposed  Message
application                 active       1  application                   0  no       
application-host            active       1  application                   0  no       
config-server-one           active       1  mongodb                       0  no       
config-server-two           active       1  mongodb                       1  no       
mongos                      active       1  mongos         6/edge        25  no       
replication                 active       1  mongodb                       3  no       
s3-integrator               blocked      1  s3-integrator  latest/edge   65  no       Missing parameters: ['access-key', 'secret-key']
shard                       active       1  mongodb                       2  no       

Unit                  Workload  Agent      Machine  Public address  Ports            Message
application-host/0*   active    idle       4        10.158.215.43                    
  mongos/0*           waiting   idle                10.158.215.43                    Waiting for secrets from config-server
application/0*        active    idle       6        10.158.215.197                   
config-server-one/0*  active    idle       0        10.158.215.56   27017-27018/tcp  
config-server-two/0*  active    idle       1        10.158.215.199  27017-27018/tcp  
replication/0*        blocked   idle       5        10.158.215.59   27017/tcp        Relation to mongos not supported, config role must be config-server
s3-integrator/0*      blocked   executing  3        10.158.215.64                    Missing parameters: ['access-key', 'secret-key']
shard/0*              blocked   executing  2        10.158.215.165  27017/tcp        Relation to s3-integrator is not supported, config role must be config-server

Machine  State    Address         Inst id        Base          AZ  Message
0        started  10.158.215.56   juju-c07f15-0  ubuntu@22.04      Running
1        started  10.158.215.199  juju-c07f15-1  ubuntu@22.04      Running
2        started  10.158.215.165  juju-c07f15-2  ubuntu@22.04      Running
3        started  10.158.215.64   juju-c07f15-3  ubuntu@22.04      Running
4        started  10.158.215.43   juju-c07f15-4  ubuntu@22.04      Running
5        started  10.158.215.59   juju-c07f15-5  ubuntu@22.04      Running
6        started  10.158.215.197  juju-c07f15-6  ubuntu@20.04      Running

[32mINFO    [0m pytest_operator.plugin:plugin.py:909 Juju error logs:

machine-1: 02:39:58 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 02:39:58 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-two-0: 02:39:59 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-0: 02:39:59 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 02:39:59 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-one-0: 02:39:59 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-2: 02:40:29 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-2: 02:40:29 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-0: 02:40:29 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-3: 02:40:51 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-3: 02:40:51 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-s3-integrator-0: 02:40:51 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-5: 02:41:29 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-5: 02:41:29 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-replication-0: 02:41:29 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-one-0: 02:42:08 ERROR unit.config-server-one/0.juju-log _on_secret_remove: Secret secret:cs490ql0lhp1s5ddn790 seems to have no observers, could be removed
unit-config-server-two-0: 02:42:18 ERROR unit.config-server-two/0.juju-log _on_secret_remove: Secret secret:cs490td0lhp1s5ddn79g seems to have no observers, could be removed
unit-shard-0: 02:42:34 ERROR unit.shard/0.juju-log _on_secret_remove: Secret secret:cs4911t0lhp1s5ddn7a0 seems to have no observers, could be removed
machine-6: 02:42:40 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-6: 02:42:40 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-application-0: 02:42:40 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-4: 02:42:48 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-4: 02:42:48 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-application-host-0: 02:42:48 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-replication-0: 02:42:50 ERROR unit.replication/0.juju-log _on_secret_remove: Secret secret:cs4915l0lhp1s5ddn7ag seems to have no observers, could be removed
unit-mongos-0: 02:43:00 ERROR juju.worker.meterstatus error running "meter-status-changed": exit status 1
unit-mongos-0: 02:43:09 ERROR unit.mongos/0.juju-log Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-mongos-0/charm/./src/charm.py", line 669, in <module>
    ops.main(MongosOperatorCharm)
  File "/var/lib/juju/agents/unit-mongos-0/charm/venv/ops/main.py", line 563, in __call__
    return main(charm_class, use_juju_for_storage=use_juju_for_storage)
  File "/var/lib/juju/agents/unit-mongos-0/charm/venv/ops/main.py", line 551, in main
    manager.run()
  File "/var/lib/juju/agents/unit-mongos-0/charm/venv/ops/main.py", line 530, in run
    self._emit()
  File "/var/lib/juju/agents/unit-mongos-0/charm/venv/ops/main.py", line 519, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name)
  File "/var/lib/juju/agents/unit-mongos-0/charm/venv/ops/main.py", line 147, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-mongos-0/charm/venv/ops/framework.py", line 348, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-mongos-0/charm/venv/ops/framework.py", line 860, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-mongos-0/charm/venv/ops/framework.py", line 950, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-mongos-0/charm/./src/charm.py", line 107, in _on_install
    self.install_snap_packages(packages=Config.SNAP_PACKAGES)
  File "/var/lib/juju/agents/unit-mongos-0/charm/./src/charm.py", line 166, in install_snap_packages
    snap_package = snap_cache[snap_name]
  File "/var/lib/juju/agents/unit-mongos-0/charm/lib/charms/operator_libs_linux/v1/snap.py", line 795, in __getitem__
    self._snap_map[snap_name] = self._load_info(snap_name)
  File "/var/lib/juju/agents/unit-mongos-0/charm/lib/charms/operator_libs_linux/v1/snap.py", line 843, in _load_info
    info = self._snap_client.get_snap_information(name)
  File "/var/lib/juju/agents/unit-mongos-0/charm/lib/charms/operator_libs_linux/v1/snap.py", line 751, in get_snap_information
    return self._request("GET", "find", {"name": name})[0]
  File "/var/lib/juju/agents/unit-mongos-0/charm/lib/charms/operator_libs_linux/v1/snap.py", line 708, in _request
    response = self._request_raw(method, path, query, headers, data)
  File "/var/lib/juju/agents/unit-mongos-0/charm/lib/charms/operator_libs_linux/v1/snap.py", line 729, in _request_raw
    response = self.opener.open(request, timeout=self.timeout)
  File "/usr/lib/python3.10/urllib/request.py", line 519, in open
    response = self._open(req, data)
  File "/usr/lib/python3.10/urllib/request.py", line 536, in _open
    result = self._call_chain(self.handle_open, protocol, protocol +
  File "/usr/lib/python3.10/urllib/request.py", line 496, in _call_chain
    result = func(*args)
  File "/var/lib/juju/agents/unit-mongos-0/charm/lib/charms/operator_libs_linux/v1/snap.py", line 645, in http_open
    return self.do_open(_UnixSocketConnection, req, socket_path=self.socket_path)
  File "/usr/lib/python3.10/urllib/request.py", line 1352, in do_open
    r = h.getresponse()
  File "/usr/lib/python3.10/http/client.py", line 1375, in getresponse
    response.begin()
  File "/usr/lib/python3.10/http/client.py", line 318, in begin
    version, status, reason = self._read_status()
  File "/usr/lib/python3.10/http/client.py", line 279, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/usr/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
TimeoutError: timed out
unit-mongos-0: 02:43:10 ERROR juju.worker.uniter.operation hook "install" (via hook dispatching script: dispatch) failed: exit status 1
unit-shard-0: 02:44:18 ERROR juju.worker.uniter resolver loop error: permission denied
unit-config-server-one-0: 02:44:18 ERROR juju.worker.uniter resolver loop error: permission denied
unit-shard-0: 02:44:18 ERROR juju.worker.dependency "uniter" manifold worker returned unexpected error: permission denied
unit-config-server-one-0: 02:44:18 ERROR juju.worker.dependency "uniter" manifold worker returned unexpected error: permission denied
unit-shard-0: 02:44:40 ERROR unit.shard/0.juju-log database:13: Charm is in sharding role: shard. Does not support database interface.
unit-shard-0: 02:44:40 ERROR unit.shard/0.juju-log database:13: Charm is in sharding role: shard. Does not support database interface.
unit-shard-0: 02:44:42 ERROR unit.shard/0.juju-log database:13: Charm is in sharding role: shard. Does not support database interface.
unit-shard-0: 02:45:38 ERROR unit.shard/0.juju-log database:13: Charm is in sharding role: shard. Does not support database interface.
unit-replication-0: 02:46:01 ERROR unit.replication/0.juju-log sharding:15: Charm is in sharding role: replication. Does not support sharding interface.
unit-config-server-one-0: 02:46:02 ERROR unit.config-server-one/0.juju-log config-server:15: Failed to add shard replication to the config server, error=OperationFailure("Authentication failed., full error: {'ok': 0.0, 'errmsg': 'Authentication failed.', 'code': 18, 'codeName': 'AuthenticationFailed', '$clusterTime': {'clusterTime': Timestamp(1728614762, 1), 'signature': {'hash': b'\\x95\\xcd\\xf2\\xbf\\x95_\\xb0E\\x9c\\x15\\x92\\xec[h\\xc0\\xce\\xdd\\xb6\\x06\\x9d', 'keyId': 7424342805020934169}}, 'operationTime': Timestamp(1728614762, 1)}")
unit-config-server-one-0: 02:46:02 ERROR unit.config-server-one/0.juju-log config-server:15: replication shard does not have the same auth as the config server.
unit-replication-0: 02:46:03 ERROR unit.replication/0.juju-log sharding:15: Charm is in sharding role: replication. Does not support sharding interface.
unit-replication-0: 02:46:06 ERROR unit.replication/0.juju-log sharding:15: Charm is in sharding role: replication. Does not support sharding interface.
unit-mongos-0: 02:46:33 ERROR unit.mongos/0.juju-log cluster:17: Can't delete secret for relation 11
unit-replication-0: 02:46:34 ERROR juju.worker.dependency "uniter" manifold worker returned unexpected error: relation scope id "ecadf3bf-2b76-413e-83c2-ea6f55c07f15:r#17#mongos": settings ecadf3bf-2b76-413e-83c2-ea6f55c07f15:r#17#mongos not found (not found)
unit-mongos-0: 02:46:57 ERROR unit.mongos/0.juju-log cluster:18: Can't delete secret for relation 11

[32mINFO    [0m pytest_operator.plugin:plugin.py:991 Forgetting model main...