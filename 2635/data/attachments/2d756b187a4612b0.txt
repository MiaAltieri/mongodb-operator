[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [allocating] waiting: waiting for machine
  config-server-one/1 [allocating] waiting: waiting for machine
  shard-one/0 [allocating] waiting: waiting for machine
  shard-one/1 [allocating] waiting: waiting for machine
  shard-two/0 [allocating] waiting: waiting for machine
  shard-two/1 [allocating] waiting: waiting for machine
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [allocating] waiting: waiting for machine
  config-server-one/1 [allocating] waiting: waiting for machine
  shard-one/0 [allocating] waiting: waiting for machine
  shard-one/1 [allocating] waiting: waiting for machine
  shard-two/0 [allocating] waiting: waiting for machine
  shard-two/1 [allocating] waiting: waiting for machine
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [allocating] waiting: waiting for machine
  config-server-one/1 [allocating] waiting: waiting for machine
  shard-one/0 [allocating] waiting: waiting for machine
  shard-one/1 [allocating] waiting: waiting for machine
  shard-two/0 [allocating] waiting: waiting for machine
  shard-two/1 [allocating] waiting: waiting for machine
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [allocating] waiting: waiting for machine
  config-server-one/1 [allocating] waiting: waiting for machine
  shard-one/0 [allocating] waiting: waiting for machine
  shard-one/1 [allocating] waiting: waiting for machine
  shard-two/0 [allocating] waiting: waiting for machine
  shard-two/1 [allocating] waiting: waiting for machine
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [allocating] waiting: agent initialising
  config-server-one/1 [allocating] waiting: agent initialising
  shard-one/0 [allocating] waiting: waiting for machine
  shard-one/1 [allocating] waiting: waiting for machine
  shard-two/0 [allocating] waiting: waiting for machine
  shard-two/1 [allocating] waiting: waiting for machine
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [executing] maintenance: Installed MongoDB
  config-server-one/1 [executing] maintenance: installing MongoDB
  shard-one/0 [executing] maintenance: installing charm software
  shard-one/1 [executing] maintenance: installing charm software
  shard-two/0 [executing] waiting: agent initialising
  shard-two/1 [allocating] waiting: agent initialising
  shard-three/0 [allocating] waiting: waiting for machine
  shard-three/1 [allocating] waiting: waiting for machine
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [executing] active: 
  config-server-one/1 [executing] active: 
  shard-one/0 [executing] maintenance: Adding shard to config-server
  shard-one/1 [executing] maintenance: Adding shard to config-server
  shard-two/0 [executing] maintenance: Adding shard to config-server
  shard-two/1 [executing] maintenance: Adding shard to config-server
  shard-three/0 [executing] maintenance: installing MongoDB
  shard-three/1 [executing] maintenance: installing MongoDB
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [executing] active: 
  config-server-one/1 [executing] active: 
  shard-one/0 [executing] active: 
  shard-one/1 [executing] active: 
  shard-two/0 [executing] active: 
  shard-two/1 [executing] active: 
  shard-three/0 [executing] active: 
  shard-three/1 [executing] maintenance: starting MongoDB
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [executing] active: 
  config-server-one/1 [executing] maintenance: Adding shard shard-one to config-server
  shard-one/0 [idle] active: 
  shard-one/1 [executing] active: 
  shard-two/0 [executing] active: 
  shard-two/1 [executing] active: 
  shard-three/0 [executing] active: 
  shard-three/1 [executing] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [idle] active: 
  config-server-one/1 [executing] active: 
  shard-one/1 [executing] active: 
  shard-two/0 [executing] active: 
  shard-three/0 [executing] active: 
  shard-three/1 [executing] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  shard-one/0 [idle] active: 
  shard-one/1 [executing] active: 
  shard-two/0 [executing] active: 
  shard-two/1 [idle] active: 
  shard-three/0 [executing] active: 
  shard-three/1 [executing] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [idle] active: 
  config-server-one/1 [idle] active: 
  shard-one/0 [idle] active: 
  shard-one/1 [idle] active: 
  shard-two/0 [idle] active: 
  shard-two/1 [idle] active: 
  shard-three/1 [executing] active: 
[32mINFO    [0m juju.model:__init__.py:3254 Waiting for model:
  config-server-one/0 [idle] active: 
  config-server-one/1 [idle] active: 
  shard-three/0 [idle] active: Primary
  shard-three/1 [idle] active:
[32mINFO    [0m pytest_operator.plugin:plugin.py:903 Model status:

Model  Controller           Cloud/Region         Version  SLA          Timestamp
test   localhost-localhost  localhost/localhost  3.6.1    unsupported  01:36:43Z

App                Version  Status  Scale  Charm    Channel  Rev  Exposed  Message
config-server-one  6.0.6    active      2  mongodb             0  no       
shard-one          6.0.6    active      2  mongodb             1  no       
shard-three        6.0.6    active      2  mongodb             3  no       
shard-two          6.0.6    active      2  mongodb             2  no       

Unit                  Workload  Agent  Machine  Public address  Ports            Message
config-server-one/0   active    idle   0        10.169.117.128  27017-27018/tcp  
config-server-one/1*  active    idle   1        10.169.117.159  27017-27018/tcp  
shard-one/0           active    idle   2        10.169.117.14   27017/tcp        
shard-one/1*          active    idle   3        10.169.117.22   27017/tcp        
shard-three/0         active    idle   6        10.169.117.74   27017/tcp        Primary
shard-three/1*        active    idle   7        10.169.117.118  27017/tcp        
shard-two/0*          active    idle   4        10.169.117.53   27017/tcp        
shard-two/1           active    idle   5        10.169.117.52   27017/tcp        Primary

Machine  State    Address         Inst id        Base          AZ  Message
0        started  10.169.117.128  juju-f807e1-0  ubuntu@22.04      Running
1        started  10.169.117.159  juju-f807e1-1  ubuntu@22.04      Running
2        started  10.169.117.14   juju-f807e1-2  ubuntu@22.04      Running
3        started  10.169.117.22   juju-f807e1-3  ubuntu@22.04      Running
4        started  10.169.117.53   juju-f807e1-4  ubuntu@22.04      Running
5        started  10.169.117.52   juju-f807e1-5  ubuntu@22.04      Running
6        started  10.169.117.74   juju-f807e1-6  ubuntu@22.04      Running
7        started  10.169.117.118  juju-f807e1-7  ubuntu@22.04      Running

[32mINFO    [0m pytest_operator.plugin:plugin.py:909 Juju error logs:

machine-1: 01:32:11 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-1: 01:32:11 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 01:32:11 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-0: 01:32:11 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-config-server-one-1: 01:32:11 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-one-0: 01:32:11 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-3: 01:32:28 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-3: 01:32:28 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-one-1: 01:32:28 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-2: 01:32:28 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-2: 01:32:28 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-one-0: 01:32:29 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-4: 01:32:33 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-4: 01:32:33 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-two-0: 01:32:34 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-5: 01:32:41 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-5: 01:32:41 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-two-1: 01:32:41 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-one-0: 01:32:52 ERROR unit.config-server-one/0.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-one-0: 01:32:52 ERROR unit.config-server-one/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
machine-7: 01:32:53 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-7: 01:32:53 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-three-1: 01:32:54 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
machine-6: 01:32:54 ERROR juju.worker.dependency "lxd-container-provisioner" manifold worker returned unexpected error: container types not yet available
machine-6: 01:32:54 ERROR juju.worker.dependency "kvm-container-provisioner" manifold worker returned unexpected error: container types not yet available
unit-shard-three-0: 01:32:54 ERROR juju.worker.meterstatus error running "meter-status-changed": charm missing from disk
unit-config-server-one-1: 01:32:56 ERROR unit.config-server-one/1.juju-log Unable to set params: ['vm.max_map_count']
unit-config-server-one-1: 01:32:56 ERROR unit.config-server-one/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-config-server-one-0: 01:33:05 ERROR unit.config-server-one/0.juju-log This operation (update_relation_data()) can only be performed by the leader unit
unit-shard-one-0: 01:33:06 ERROR unit.shard-one/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-one-0: 01:33:06 ERROR unit.shard-one/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-config-server-one-0: 01:33:07 ERROR unit.config-server-one/0.juju-log Deferring because of Exception Waiting for leader unit to generate keyfile contents
unit-shard-one-1: 01:33:15 ERROR unit.shard-one/1.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-one-1: 01:33:15 ERROR unit.shard-one/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-one-0: 01:33:16 ERROR unit.shard-one/0.juju-log This operation (update_relation_data()) can only be performed by the leader unit
unit-shard-two-0: 01:33:16 ERROR unit.shard-two/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-two-0: 01:33:16 ERROR unit.shard-two/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-one-0: 01:33:18 ERROR unit.shard-one/0.juju-log Deferring because of Exception Waiting for leader unit to generate keyfile contents
unit-shard-two-1: 01:33:20 ERROR unit.shard-two/1.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-two-1: 01:33:20 ERROR unit.shard-two/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-one-0: 01:33:21 ERROR unit.shard-one/0.juju-log sharding:8: Deferring because of Exception Waiting for leader unit to generate keyfile contents
unit-shard-one-0: 01:33:24 ERROR unit.shard-one/0.juju-log sharding:8: Deferring because of Exception Waiting for leader unit to generate keyfile contents
unit-shard-three-0: 01:33:29 ERROR unit.shard-three/0.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-three-0: 01:33:29 ERROR unit.shard-three/0.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-three-1: 01:33:37 ERROR unit.shard-three/1.juju-log Unable to set params: ['vm.max_map_count']
unit-shard-three-1: 01:33:37 ERROR unit.shard-three/1.juju-log Error setting values on sysctl: Unable to set params: ['vm.max_map_count']
unit-shard-three-0: 01:33:39 ERROR unit.shard-three/0.juju-log This operation (update_relation_data()) can only be performed by the leader unit
unit-shard-three-0: 01:33:41 ERROR unit.shard-three/0.juju-log Deferring because of Exception Waiting for leader unit to generate keyfile contents
unit-shard-three-0: 01:33:44 ERROR unit.shard-three/0.juju-log sharding:10: Deferring because of Exception Waiting for leader unit to generate keyfile contents
unit-shard-one-1: 01:34:42 ERROR unit.shard-one/1.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658b03c9530d41cc5a0e1, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.14', 27017) server_type: RSSecondary, rtt: 0.0012024950001432444>, <ServerDescription ('10.169.117.22', 27017) server_type: RSSecondary, rtt: 0.0012563309999222838>]>
unit-shard-three-1: 01:35:02 ERROR unit.shard-three/1.juju-log sharding:10: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658c518fe87cba065eac2, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.118', 27017) server_type: RSSecondary, rtt: 0.0008371870001155912>, <ServerDescription ('10.169.117.74', 27017) server_type: RSSecondary, rtt: 0.0008798690000730858>]>
unit-shard-three-1: 01:35:06 ERROR unit.shard-three/1.juju-log sharding:10: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658c918fe87cba065eac3, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.118', 27017) server_type: RSSecondary, rtt: 0.0008073330000115675>, <ServerDescription ('10.169.117.74', 27017) server_type: RSSecondary, rtt: 0.0008606879998751538>]>
unit-shard-three-1: 01:35:10 ERROR unit.shard-three/1.juju-log sharding:10: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658cd18fe87cba065eac4, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.118', 27017) server_type: RSSecondary, rtt: 0.0008294519998344185>, <ServerDescription ('10.169.117.74', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c658c5890f2cb2c9c2401a'), 'counter': 4}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 12164, 'lastCommittedOpTime': Timestamp(0, 0), '$clusterTime': {'clusterTime': Timestamp(1741052101, 4), 'signature': {'hash': b'\\x12\\x7f3\\xd3\\xe9|\\xe3\\x1c \\xe7\\x19\\x05\\xf9\\xeeE\\xa1,\\xf1\\x8a-', 'keyId': 7477761404930359308}}, 'operationTime': Timestamp(1741052083, 1)}")>]>
unit-shard-three-1: 01:35:15 ERROR unit.shard-three/1.juju-log sharding:10: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658d118fe87cba065eac5, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.118', 27017) server_type: RSSecondary, rtt: 0.0009017469999434979>, <ServerDescription ('10.169.117.74', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c658c5890f2cb2c9c2401a'), 'counter': 4}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 7983, 'lastCommittedOpTime': Timestamp(0, 0), '$clusterTime': {'clusterTime': Timestamp(1741052101, 4), 'signature': {'hash': b'\\x12\\x7f3\\xd3\\xe9|\\xe3\\x1c \\xe7\\x19\\x05\\xf9\\xeeE\\xa1,\\xf1\\x8a-', 'keyId': 7477761404930359308}}, 'operationTime': Timestamp(1741052083, 1)}")>]>
unit-shard-three-1: 01:35:19 ERROR unit.shard-three/1.juju-log sharding:10: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658d618fe87cba065eac6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.118', 27017) server_type: RSSecondary, rtt: 0.000831506999929843>, <ServerDescription ('10.169.117.74', 27017) server_type: Unknown, rtt: None, error=NotPrimaryError("The server is in quiesce mode and will shut down, full error: {'topologyVersion': {'processId': ObjectId('67c658c5890f2cb2c9c2401a'), 'counter': 4}, 'ok': 0.0, 'errmsg': 'The server is in quiesce mode and will shut down', 'code': 91, 'codeName': 'ShutdownInProgress', 'remainingQuiesceTimeMillis': 3805, 'lastCommittedOpTime': Timestamp(0, 0), '$clusterTime': {'clusterTime': Timestamp(1741052101, 4), 'signature': {'hash': b'\\x12\\x7f3\\xd3\\xe9|\\xe3\\x1c \\xe7\\x19\\x05\\xf9\\xeeE\\xa1,\\xf1\\x8a-', 'keyId': 7477761404930359308}}, 'operationTime': Timestamp(1741052083, 1)}")>]>
unit-shard-two-0: 01:35:20 ERROR unit.shard-two/0.juju-log sharding:9: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658d71005143fb5fe948a, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.52', 27017) server_type: RSSecondary, rtt: 0.0022347039998749096>, <ServerDescription ('10.169.117.53', 27017) server_type: RSSecondary, rtt: 0.0009241560001100879>]>
unit-shard-one-1: 01:35:20 ERROR unit.shard-one/1.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658d79c9be9ab56f497c5, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.14', 27017) server_type: RSSecondary, rtt: 0.001130168999907255>, <ServerDescription ('10.169.117.22', 27017) server_type: RSSecondary, rtt: 0.0011162079999849084>]>
unit-shard-three-1: 01:35:23 ERROR unit.shard-three/1.juju-log sharding:10: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658da18fe87cba065eac7, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.118', 27017) server_type: RSSecondary, rtt: 0.0010101220000251487>, <ServerDescription ('10.169.117.74', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('10.169.117.74:27017: [Errno 104] Connection reset by peer (configured timeouts: socketTimeoutMS: 2000.0ms, connectTimeoutMS: 2000.0ms)')>]>
unit-shard-two-0: 01:35:24 ERROR unit.shard-two/0.juju-log sharding:9: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658db1005143fb5fe948b, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.52', 27017) server_type: RSSecondary, rtt: 0.001840617999960159>, <ServerDescription ('10.169.117.53', 27017) server_type: RSSecondary, rtt: 0.0009375060001275415>]>
unit-shard-one-1: 01:35:24 ERROR unit.shard-one/1.juju-log sharding:8: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658db9c9be9ab56f497c6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.14', 27017) server_type: RSSecondary, rtt: 0.0009233950001998892>, <ServerDescription ('10.169.117.22', 27017) server_type: RSSecondary, rtt: 0.0007706970000072033>]>
unit-shard-three-1: 01:35:27 ERROR unit.shard-three/1.juju-log sharding:10: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658de18fe87cba065eac8, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.118', 27017) server_type: RSSecondary, rtt: 0.0011272240001289902>, <ServerDescription ('10.169.117.74', 27017) server_type: RSSecondary, rtt: 0.0011879540002155409>]>
unit-shard-three-1: 01:35:31 ERROR unit.shard-three/1.juju-log sharding:10: Unable to get primary: No replica set members match selector "Primary()", Timeout: 1.0s, Topology Description: <TopologyDescription id: 67c658e218fe87cba065eac9, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('10.169.117.118', 27017) server_type: RSSecondary, rtt: 0.0012326020000728022>, <ServerDescription ('10.169.117.74', 27017) server_type: RSSecondary, rtt: 0.0015471190001790092>]>

[32mINFO    [0m pytest_operator.plugin:plugin.py:991 Forgetting model main...