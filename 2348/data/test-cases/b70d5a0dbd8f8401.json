{"uid":"b70d5a0dbd8f8401","name":"test_scale_down_capablities","fullName":"tests.integration.ha_tests.test_ha#test_scale_down_capablities","historyId":"dd0847973cc6ed9b8a04948e12e3b114","time":{"start":1728787510755,"stop":1728787547761,"duration":37006},"description":"Tests clusters behavior when scaling down a minority and removing a primary replica.\n\n    - NOTE: on a provided cluster this calculates the largest set of minority members and removes\n    them, the primary is guaranteed to be one of those minority members.\n\n    This test verifies that the behavior of:\n    1.  when a leader is deleted that the new leader, on calling leader_elected will reconfigure\n    the replicaset.\n    2. primary stepping down leads to a replica set with a new primary.\n    3. removing a minority of units (2 out of 5) is feasiable.\n    4. race conditions due to removing multiple units is handled.\n    5. deleting a non-leader unit is properly handled.\n    ","descriptionHtml":"<p>Tests clusters behavior when scaling down a minority and removing a primary replica.</p>\n<pre><code>- NOTE: on a provided cluster this calculates the largest set of minority members and removes\nthem, the primary is guaranteed to be one of those minority members.\n\nThis test verifies that the behavior of:\n1.  when a leader is deleted that the new leader, on calling leader_elected will reconfigure\nthe replicaset.\n2. primary stepping down leads to a replica set with a new primary.\n3. removing a minority of units (2 out of 5) is feasiable.\n4. race conditions due to removing multiple units is handled.\n5. deleting a non-leader unit is properly handled.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1728786882909,"stop":1728786882910,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1728786882910,"stop":1728786883052,"duration":142},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1728786882910,"stop":1728786882910,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1728787509722,"stop":1728787510755,"duration":1033},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1728787509722,"stop":1728787509722,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Tests clusters behavior when scaling down a minority and removing a primary replica.\n\n    - NOTE: on a provided cluster this calculates the largest set of minority members and removes\n    them, the primary is guaranteed to be one of those minority members.\n\n    This test verifies that the behavior of:\n    1.  when a leader is deleted that the new leader, on calling leader_elected will reconfigure\n    the replicaset.\n    2. primary stepping down leads to a replica set with a new primary.\n    3. removing a minority of units (2 out of 5) is feasiable.\n    4. race conditions due to removing multiple units is handled.\n    5. deleting a non-leader unit is properly handled.\n    ","status":"passed","steps":[],"attachments":[{"uid":"f289baa13d6b759a","name":"log","source":"f289baa13d6b759a.txt","type":"text/plain","size":259}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1728787547762,"stop":1728787549876,"duration":2114},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1728787549877,"stop":1728787549877,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1728791001082,"stop":1728791001448,"duration":366},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1728791001449,"stop":1728791001449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1728791001449,"stop":1728791001449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1728791001449,"stop":1728791001449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"runner(['self-hosted', 'linux', 'X64', 'jammy', 'large'])"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.ha_tests"},{"name":"suite","value":"test_ha"},{"name":"host","value":"github-runner"},{"name":"thread","value":"17334-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.ha_tests.test_ha"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f2c5d019accb4ebe","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":13,"passed":59,"unknown":4,"total":76},"items":[{"uid":"ec2b22b3f852c1ee","reportUrl":"../2347//#testresult/ec2b22b3f852c1ee","status":"unknown","time":{}},{"uid":"932936cc44de892c","reportUrl":"../2346//#testresult/932936cc44de892c","status":"passed","time":{"start":1728615225961,"stop":1728615265676,"duration":39715}},{"uid":"3130f2a63f4234d8","reportUrl":"../2342//#testresult/3130f2a63f4234d8","status":"passed","time":{"start":1728529509836,"stop":1728529550759,"duration":40923}},{"uid":"7408e48ac9c0a74e","reportUrl":"../2340//#testresult/7408e48ac9c0a74e","status":"passed","time":{"start":1728441324982,"stop":1728441368495,"duration":43513}},{"uid":"3a44a887ac852ab","reportUrl":"../2338//#testresult/3a44a887ac852ab","status":"passed","time":{"start":1728355011699,"stop":1728355056228,"duration":44529}},{"uid":"eb3ac8310a5b3a53","reportUrl":"../2335//#testresult/eb3ac8310a5b3a53","status":"passed","time":{"start":1728267082851,"stop":1728267125606,"duration":42755}},{"uid":"109ba3bfc67a1719","reportUrl":"../2334//#testresult/109ba3bfc67a1719","status":"passed","time":{"start":1728181744753,"stop":1728181780363,"duration":35610}},{"uid":"c3eefd7a8f17f86f","reportUrl":"../2333//#testresult/c3eefd7a8f17f86f","status":"passed","time":{"start":1728096307371,"stop":1728096348002,"duration":40631}},{"uid":"4296d484c19a4a8d","reportUrl":"../2330//#testresult/4296d484c19a4a8d","status":"passed","time":{"start":1728009461263,"stop":1728009502416,"duration":41153}},{"uid":"ee7dee8cf41f2791","reportUrl":"../2320//#testresult/ee7dee8cf41f2791","status":"passed","time":{"start":1727921260904,"stop":1727921301568,"duration":40664}},{"uid":"1b36988efd1f4e15","reportUrl":"../2310//#testresult/1b36988efd1f4e15","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1727837053044,"stop":1727837053044,"duration":0}},{"uid":"2077ac05f0f88b59","reportUrl":"../2307//#testresult/2077ac05f0f88b59","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1727750250007,"stop":1727750250007,"duration":0}},{"uid":"815b4c6966e99cf7","reportUrl":"../2304//#testresult/815b4c6966e99cf7","status":"passed","time":{"start":1727664286844,"stop":1727664328310,"duration":41466}},{"uid":"268628687cee291d","reportUrl":"../2303//#testresult/268628687cee291d","status":"passed","time":{"start":1727575838534,"stop":1727575879196,"duration":40662}},{"uid":"70636aa5efe39747","reportUrl":"../2302//#testresult/70636aa5efe39747","status":"passed","time":{"start":1727489577499,"stop":1727489618309,"duration":40810}},{"uid":"3c54c7d456c78ec5","reportUrl":"../2300//#testresult/3c54c7d456c78ec5","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1727405254661,"stop":1727405254661,"duration":0}},{"uid":"bda2f5a0909345ea","reportUrl":"../2299//#testresult/bda2f5a0909345ea","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1727318330002,"stop":1727318330002,"duration":0}},{"uid":"cd75e533511ce431","reportUrl":"../2298//#testresult/cd75e533511ce431","status":"passed","time":{"start":1727231163325,"stop":1727231207820,"duration":44495}},{"uid":"2f78aef85b9a495a","reportUrl":"../2297//#testresult/2f78aef85b9a495a","status":"passed","time":{"start":1727144291452,"stop":1727144330188,"duration":38736}},{"uid":"57784bbb5fdeb79b","reportUrl":"../2293//#testresult/57784bbb5fdeb79b","status":"passed","time":{"start":1727058135252,"stop":1727058176142,"duration":40890}}]},"tags":["runner(['self-hosted', 'linux', 'X64', 'jammy', 'large'])","asyncio","abort_on_fail","group(1)"]},"source":"b70d5a0dbd8f8401.json","parameterValues":[]}